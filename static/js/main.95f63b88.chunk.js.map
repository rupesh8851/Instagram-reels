{"version":3,"sources":["logo.svg","firebase.js","Context/AuthProvider.js","Components/Login.js","Components/Signup.js","Components/HeaderBar.js","Components/Profile.js","Components/Comments.js","Components/CommentEditor.js","Components/CommentVideo.js","Components/CommentModal.js","Components/Feed.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","firestore","database","users","collection","posts","comments","getUserTimeStamp","FieldValue","serverTimestamp","storage","AuthContext","React","createContext","AuthProvider","children","useState","currentUser","setCurrentUser","loader","setloader","useEffect","onAuthStateChanged","user","AuthValues","signout","signOut","login","email","password","signInWithEmailAndPassword","signup","createUserWithEmailAndPassword","Provider","value","Login","props","classes","makeStyles","mainContainer","height","width","display","justifyContent","alignItems","margin","useStyles","setEmail","setPassword","setError","setLoader","useContext","handleSubmit","e","a","preventDefault","history","push","Grid","container","className","spacing","Hidden","xsDown","smDown","mdDown","item","xs","sm","md","lg","style","position","CardMedia","image","backgroundSize","marginLeft","animation","indicators","swipe","navButtonsAlwaysInvisible","autoPlay","interval","src","LinearProgress","color","Card","variant","padding","TextField","id","label","type","fullWidth","size","onChange","target","Typography","textAlign","gutterBottom","LinkButton","content","routeLink","Button","disabled","backgroundColor","onClick","marginTop","textDecoration","to","Signup","username","setUsername","userBio","setUserBio","file","setFile","handleSignUp","progressTrackFn","snapshot","bytesTransferred","totalBytes","errorFn","error","successFn","uploadFilesListener","ref","getDownloadURL","downloadFileURL","doc","userUniqueID","set","userId","createdAt","profileImageURL","postIds","res","uid","put","on","files","handleFileInput","startIcon","opacity","HeaderBar","loading","setLoading","theme","appBar","toolBar","iconContainer","marginRight","iconButton","anchorEl","setAnchorEl","open","Boolean","handleSignOut","console","log","AppBar","Toolbar","Container","IconButton","window","scrollTo","currentTarget","Avatar","alt","Menu","keepMounted","onClose","TransitionComponent","Fade","MenuItem","Video","loop","muted","minHeight","handlePostSound","previousSibling","Profile","imageSection","userImageIcon","boxShadow","userName","fontFamily","fontSize","userDescription","lineHeight","flexDirection","videoSection","flexWrap","gap","videoContainer","overlayContainer","left","top","fontWeight","zIndex","setUser","pageLoading","setPageLoading","videos","setVideos","get","dataObject","data","onSnapshot","docs","map","videosDataArrFromFireStore","i","length","videoUrl","url","auid","likes","videoDescription","puid","userObject","likesCount","CircularProgress","circularLoader","marginBottom","Divider","videoObj","onMouseOver","onMouseOut","Comments","commentObj","commentBox","avatarIcon","commentContent","commentText","letterSpacing","profile","description","CommentEditor","commentVideoObj","commentSectionWriter","borderWidth","borderStyle","borderColor","commentEditor","border","resize","outline","paddingLeft","paddingTop","sendIcon","comment","setComment","handleCommentPost","commentObjStructure","userProfileImageURL","add","postRef","post","update","placeholder","CommentVideo","CommentModal","postComments","setCommentVideoObj","boxSizing","commentSection","commentSectionHeader","avatarSection","heigth","profileName","optionsSection","optionsIcon","commentSectionBody","overflow","cuid","Feed","scrollAndVideoActionObserver","infiniteScrollObserver","root","input","feedContainer","reelsContainer","likeIcon","commentIcon","liked","unliked","videoActionsIconsContainer","modal","paper","palette","background","shadows","borderRadius","videoDescriptionSection","bottom","uploadFile","setUploadFile","setIsLiked","setPostComments","lastVisiblePost","setLastVisiblePost","setOpen","setVideoDescription","handleClose","uploadNewPostInFirestore","uploadFileTask","uuid","then","postObjStructure","postObj","updatedUserPosts","orderBy","startAfter","limit","curVideos","includes","unsubscribe","allPosts","document","querySelectorAll","disconnect","disonnect","IntersectionObserver","entries","forEach","entry","play","isIntersecting","pause","postDimensions","getBoundingClientRect","scrollBy","behavior","rootMargin","threshold","fetchPostsInBatches","unobserve","idx","observe","handleLiked","filter","likedByUid","handleComment","commentsDataArrFromFirestore","Modal","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","in","accept","alert","htmlFor","component","endIcon","PrivateRoute","Component","privateComponent","restProps","render","App","path","SignUp","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","getElementById"],"mappings":"qNAAe,I,2DCKfA,IAASC,cACL,CACIC,OAAQ,0CACRC,WAAY,4BACZC,UAAW,YACXC,cAAe,wBACfC,kBAAmB,eACnBC,MAAO,8CAMf,IAEeC,EAFJR,IAASQ,OAGPC,EAAYT,IAASS,YACrBC,EAAW,CACpBC,MAAOF,EAAUG,WAAW,SAC5BC,MAAOJ,EAAUG,WAAW,SAC5BE,SAAUL,EAAUG,WAAW,YAC/BG,iBAAkBf,IAASS,UAAUO,WAAWC,iBAEvCC,EAAUlB,IAASkB,U,OC1BnBC,EAAcC,IAAMC,gBAE1B,SAASC,EAAT,GAAqC,IAAbC,EAAY,EAAZA,SAC3B,EAAsCC,qBAAtC,mBAAOC,EAAP,KAAoBC,EAApB,KACA,EAA4BF,oBAAS,GAArC,mBAAOG,EAAP,KAAeC,EAAf,KAcAC,qBAAU,WAQN,OALkCrB,EAAKsB,oBAAmB,SAAAC,GACtDL,EAAeK,GACfH,GAAU,QAIf,IAGH,IAAII,EAAa,CAAEP,cAAaQ,QAnBhB,WACZ,OAAOzB,EAAK0B,WAkByBC,MAtB3B,SAACC,EAAOC,GAClB,OAAO7B,EAAK8B,2BAA2BF,EAAOC,IAqBFE,OAhBjC,SAACH,EAAOC,GACnB,OAAO7B,EAAKgC,+BAA+BJ,EAAOC,KAiBtD,OAEI,aADA,CACClB,EAAYsB,SAAb,CAAsBC,MAAOV,EAA7B,UACML,GAAUJ,I,8HC/BT,SAASoB,EAAMC,GAC1B,IAWMC,EAXYC,YAAW,CACzBC,cAAe,CACXC,OAAQ,QACRC,MAAO,OAEPC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,OAAQ,SAGAC,GAEhB,EAA0B9B,mBAAS,IAAnC,mBAAOY,EAAP,KAAcmB,EAAd,KACA,EAAgC/B,mBAAS,IAAzC,mBAAOa,EAAP,KAAiBmB,EAAjB,KACA,EAA0BhC,oBAAS,GAAnC,mBAAciC,GAAd,WACA,EAA4BjC,oBAAS,GAArC,mBAAOG,EAAP,KAAe+B,EAAf,KACQvB,EAAUwB,qBAAWxC,GAArBgB,MAEFyB,EAAY,uCAAG,WAAOC,GAAP,SAAAC,EAAA,6DAEjBD,EAAEE,iBAFe,SAIbL,GAAU,GAJG,SAKPvB,EAAMC,EAAOC,GALN,OAMbqB,GAAU,GAGVd,EAAMoB,QAAQC,KAAK,KATN,gDAWbP,GAAU,GACVD,GAAS,GACTF,EAAS,IACTC,EAAY,IAdC,yDAAH,sDAkBlB,OAEI,8BACI,eAACU,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAWvB,EAAQE,cAAesB,QAAS,EAA3D,UACI,cAACC,EAAA,EAAD,CAAQC,QAAM,EAACC,QAAM,EAACC,QAAM,EAA5B,SACI,cAACP,EAAA,EAAD,CAAMQ,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAApC,SACI,qBAAKC,MAAO,CAAEC,SAAU,YAAxB,SACI,cAACC,EAAA,EAAD,CACIC,MAAM,oFACNH,MAAO,CAAEI,eAAgB,UAAWnC,OAAQ,OAAQgC,SAAU,WAAY9B,QAAS,OAAQC,eAAgB,SAAUC,WAAY,UAFrI,SAII,qBAAK2B,MAAO,CAAE/B,OAAQ,QAASC,MAAO,QAASmC,WAAY,UAA3D,SACI,eAAC,IAAD,CAAUC,UAAU,OAAOC,YAAY,EAAOC,OAAO,EAAOC,2BAA2B,EAAMC,UAAQ,EAACC,SAAS,OAA/G,UACI,qBAAKC,IAAI,sFACT,qBAAKA,IAAI,sFACT,qBAAKA,IAAI,sFACT,qBAAKA,IAAI,mGAOjC,eAACzB,EAAA,EAAD,CAAMQ,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAArC,UACKnD,EAAS,cAACiE,EAAA,EAAD,CAAgBC,MAAM,cAAiB,KACjD,eAACC,EAAA,EAAD,CAAMC,QAAQ,WACVhB,MAAO,CAAEiB,QAAS,QADtB,UAEI,cAACf,EAAA,EAAD,CACIC,MAAM,gFACNH,MAAO,CAAEI,eAAgB,UAAWnC,OAAQ,UAChD,eAACkB,EAAA,EAAD,CAAMC,WAAS,EAACE,QAAS,EAAzB,UACI,cAACH,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,cAACmB,EAAA,EAAD,CACIC,GAAG,uBACHC,MAAM,QACNC,KAAK,QACLL,QAAQ,WACRrD,MAAON,EACPiE,WAAW,EACXC,KAAK,QACLC,SAAU,SAAC1C,GAAQN,EAASM,EAAE2C,OAAO9D,YAG7C,cAACwB,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,cAACmB,EAAA,EAAD,CACIC,GAAG,0BACHC,MAAM,WACNC,KAAK,WACLL,QAAQ,WACRrD,MAAOL,EACPgE,WAAW,EACXC,KAAK,QACLC,SAAU,SAAC1C,GAAQL,EAAYK,EAAE2C,OAAO9D,YAGhD,cAACwB,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,cAAC2B,EAAA,EAAD,CACI1B,MAAO,CAAE2B,UAAW,UACpBX,QAAQ,QACRY,cAAY,EAHhB,SAII,cAACC,EAAD,CAAYC,QAAQ,mBAChBC,UAAU,gBAGtB,cAAC5C,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,cAACiC,EAAA,EAAD,CACIhB,QAAQ,YACRiB,SAAUrF,EACV0E,WAAW,EACXC,KAAK,SACLvB,MAAO,CAAEkC,gBAAiB,UAAWpB,MAAO,WAC5CqB,QAAStD,EANb,2BAWZ,cAACkC,EAAA,EAAD,CACIC,QAAQ,WACRhB,MAAO,CAAEoC,UAAW,QAFxB,SAGI,eAACV,EAAA,EAAD,CACI1B,MAAO,CAAE2B,UAAW,SAAUV,QAAS,UACvCD,QAAQ,QACRY,cAAY,EAHhB,oCAI2B,cAACC,EAAD,CAAYC,QAAQ,UACvCC,UAAU,yBAU1C,SAASF,EAAT,GAA6C,IAAvBC,EAAsB,EAAtBA,QAASC,EAAa,EAAbA,UAC3B,OACI,cAAC,IAAD,CAAM/B,MAAO,CAAEqC,eAAgB,OAAQvB,MAAO,WAAawB,GAAIP,EAA/D,SAA2ED,I,6BCxIpE,SAASS,EAAO1E,GAAQ,IAAD,EAY5BC,EAXYC,YAAW,CACzBC,cAAe,CACXC,OAAQ,QACRC,MAAO,OAEPC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,OAAQ,SAGAC,GAEhB,EAAgC9B,mBAAS,IAAzC,mBAAO+F,EAAP,KAAiBC,EAAjB,KACA,EAA0BhG,mBAAS,IAAnC,mBAAOY,EAAP,KAAcmB,EAAd,KACA,EAAgC/B,mBAAS,IAAzC,mBAAOa,EAAP,KAAiBmB,EAAjB,KACA,EAA8BhC,mBAAS,IAAvC,mBAAOiG,EAAP,KAAgBC,EAAhB,KACA,EAA4BlG,oBAAS,GAArC,mBAAOG,EAAP,KAAe+B,EAAf,KACA,EAA0BlC,mBAAS,IAAnC,mBAAciC,GAAd,WACA,EAAwBjC,mBAAS,MAAjC,mBAAOmG,EAAP,KAAaC,EAAb,KACQrF,EAAWoB,qBAAWxC,GAAtBoB,OAYFsF,EAAY,uCAAG,WAAOhE,GAAP,yBAAAC,EAAA,6DACjBD,EAAEE,iBADe,SAgBJ+D,EAAT,SAAyBC,GACLA,EAASC,iBAAmBD,EAASE,YAGhDC,EAAT,SAAiBC,GACb1E,EAAS0E,GACTzE,GAAU,IAEC0E,EAxBF,+BAAAtE,EAAA,MAwBb,4BAAAA,EAAA,sEAEgCuE,EAAoBN,SAASO,IAAIC,iBAFjE,OAEQC,EAFR,OAGI9H,EAASC,MAAM8H,IAAIC,GAAcC,IAAI,CACjCvG,QACAwG,OAAQF,EACRnB,WACAsB,UAAWnI,EAASK,mBACpB+H,gBAAiBN,EACjBO,QAAS,GACTtB,YAGJ/D,GAAU,GACVd,EAAMoB,QAAQC,KAAK,KAdvB,2CAxBa,qDAGbP,GAAU,GAHG,SAMGnB,EAAOH,EAAOC,GANjB,OAMT2G,EANS,OAOTN,EAAeM,EAAIjH,KAAKkH,KACtBZ,EAAsBnH,EAAQoH,IAAR,iBAAsBI,IAAgBQ,IAAIvB,IAMlDwB,GAAG,gBAAiBrB,EAAiBI,EAASE,GAdrD,kDA0Cb3E,EAAS,EAAD,IACRC,GAAU,GA3CG,0DAAH,sDA+ClB,OACI,mCACI,cAACQ,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAWvB,EAAQE,cAAesB,QAAS,EAA3D,SACI,eAACH,EAAA,EAAD,CAAMQ,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAArC,UACKnD,EAAS,cAACiE,EAAA,EAAD,CAAgBC,MAAM,cAAiB,KACjD,eAACC,EAAA,EAAD,CAAMC,QAAQ,WACVhB,MAAO,CAAEiB,QAAS,QADtB,UAEI,cAACf,EAAA,EAAD,CACIC,MAAM,gFACNH,MAAO,CAAEI,eAAgB,UAAWnC,OAAQ,WAChD,eAACkB,EAAA,EAAD,CAAMC,WAAS,EAACE,QAAS,EAAzB,UACI,cAACH,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,cAAC2B,EAAA,GAAD,GACI1B,MAAO,CAAE2B,UAAW,UACpBX,QAAQ,KACRY,cAAY,EACZL,KAAK,SAJT,sBAKW,CAAET,MAAO,UAAWa,UAAW,WAL1C,sFASJ,cAACxC,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,cAACmB,EAAA,EAAD,CACIC,GAAG,uBACHC,MAAM,QACNC,KAAK,QACLL,QAAQ,WACRrD,MAAON,EACPiE,WAAW,EACXC,KAAK,QACLC,SAAU,SAAC1C,GAAQN,EAASM,EAAE2C,OAAO9D,YAG7C,cAACwB,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,cAACmB,EAAA,EAAD,CACIC,GAAG,0BACHC,MAAM,WACNC,KAAK,WACLL,QAAQ,WACRrD,MAAOL,EACPgE,WAAW,EACXC,KAAK,QACLC,SAAU,SAAC1C,GAAQL,EAAYK,EAAE2C,OAAO9D,YAGhD,cAACwB,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,cAACmB,EAAA,EAAD,CACIC,GAAG,0BACHC,MAAM,WACNC,KAAK,OACLL,QAAQ,WACRrD,MAAO6E,EACPlB,WAAW,EACXC,KAAK,QACLC,SAAU,SAAC1C,GAAQ2D,EAAY3D,EAAE2C,OAAO9D,YAGhD,cAACwB,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,cAACmB,EAAA,EAAD,CACIC,GAAG,0BACHC,MAAM,MACNC,KAAK,OACLL,QAAQ,WACRrD,MAAO+E,EACPpB,WAAW,EACXC,KAAK,QACLC,SAAU,SAAC1C,GAAQ6D,EAAW7D,EAAE2C,OAAO9D,YAG/C,cAACwB,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,eAACiC,EAAA,EAAD,CACIhB,QAAQ,WACRF,MAAM,YACNQ,WAAW,EACXC,KAAK,SACLC,SAAU,SAAC1C,IA1InB,SAACA,GAAO,IAAD,EAEvB8D,EAAI,OAAG9D,QAAH,IAAGA,GAAH,UAAGA,EAAG2C,cAAN,aAAG,EAAW4C,MAAM,GAExBzB,GAEAC,EAAQD,GAoImC0B,CAAgBxF,IACnCyF,UAAW,cAAC,IAAD,IANf,iCAOI,cAACrD,EAAA,EAAD,CACIG,KAAK,OACLrB,MAAO,CAAEwE,QAAS,IAAKvE,SAAU,WAAY/B,MAAO,OAAQD,OAAQ,eAIhF,cAACkB,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,cAACiC,EAAA,EAAD,CACIhB,QAAQ,YAERM,WAAW,EACXtB,MAAO,CAAEkC,gBAAiB,UAAWpB,MAAO,WAC5CS,KAAK,SACLU,SAAUrF,EACVuF,QAASW,EAPb,uBAUJ,cAAC3D,EAAA,EAAD,CACIQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GADrC,SAEI,cAAC2B,EAAA,EAAD,CACI1B,MAAO,CAAE2B,UAAW,UACpBX,QAAQ,QACRY,cAAY,EACZL,KAAK,QAJT,4FAUZ,cAACR,EAAA,EAAD,CACIC,QAAQ,WACRhB,MAAO,CAAEoC,UAAW,QAFxB,SAGI,eAACV,EAAA,EAAD,CACI1B,MAAO,CAAE2B,UAAW,SAAUV,QAAS,UACvCD,QAAQ,QACRY,cAAY,EAHhB,8BAIqB,cAAC,EAAD,CAAYE,QAAQ,SACjCC,UAAU,uBAS1C,SAASF,EAAT,GAA6C,IAAvBC,EAAsB,EAAtBA,QAASC,EAAa,EAAbA,UAC3B,OACI,cAAC,IAAD,CAAM/B,MAAO,CAAEqC,eAAgB,OAAQvB,MAAO,WAAawB,GAAIP,EAA/D,SAA2ED,I,gICtNpE,SAAS2C,GAAT,GAAiD,IAA7BC,EAA4B,EAA5BA,QAASC,EAAmB,EAAnBA,WAAY3H,EAAO,EAAPA,KA2BhDc,EA1BcC,aAAW,SAAC6G,GAAD,MAAY,CACrCC,OAAQ,CACJ5G,OAAQ,OACRE,QAAS,OACT+D,gBAAiB,SAErB4C,QAAS,CACL3G,QAAS,OACTC,eAAgB,gBAEhBF,MAAO,OACPI,OAAQ,OACR2C,QAAS,KAEb8D,cAAe,CAEX7G,MAAO,QACPmC,WAAY,IACZ2E,YAAa,KAEjBC,WAAY,CACRnE,MAAO,YAKDvC,GACNrB,EAAY0B,qBAAWxC,GAAvBc,QAGR,EAAgCb,IAAMI,SAAS,MAA/C,mBAAOyI,EAAP,KAAiBC,EAAjB,KACMC,EAAOC,QAAQH,GAIfI,EAAa,uCAAG,WAAOxG,GAAP,SAAAC,EAAA,sEAEd4F,GAAW,GAFG,SAGRzH,IAHQ,OAIdyH,GAAW,GAJG,gDAMdY,QAAQC,IAAR,MACAb,GAAW,GAPG,yDAAH,sDAWnB,OACI,8BACI,eAACc,EAAA,EAAD,CAAQpG,UAAWvB,EAAQ+G,OAAQ5E,SAAS,QAA5C,UACKyE,EAAU,cAAC7D,EAAA,EAAD,CAAgBC,MAAM,cAAiB,KAElD,eAAC4E,EAAA,EAAD,CACIrG,UAAWvB,EAAQgH,QACnB9D,QAAQ,QAFZ,UAKI,qBAAK/C,OAAO,OAAOC,MAAM,QAAQ0C,IAAI,6FACrC,eAAC+E,EAAA,EAAD,CAAWtG,UAAWvB,EAAQiH,cAA9B,UACI,cAACa,EAAA,EAAD,CAAYvG,UAAWvB,EAAQmH,WAA/B,SACI,cAAC,IAAD,CAAM3C,GAAG,IAAItC,MAAO,CAACqC,eAAgB,OAAQvB,MAAO,WAApD,SACI,cAAC,KAAD,CAAUqB,QAAS,WAAQ0D,OAAOC,SAAS,EAAG,UAGtD,cAACF,EAAA,EAAD,CAAYzD,QA/BJ,SAACrD,GAAD,OAAOqG,EAAYrG,EAAEiH,gBA+B7B,SACI,cAACC,EAAA,EAAD,CAAQC,IAAI,UAAUjG,MAAO,CAAE/B,OAAQ,SAAUC,MAAO,UAAY0C,IAAG,OAAE5D,QAAF,IAAEA,OAAF,EAAEA,EAAM+G,oBAEnF,eAACmC,EAAA,EAAD,CACI/E,GAAG,YACH+D,SAAUA,EACViB,aAAW,EACXf,KAAMA,EACNgB,QAtCJ,kBAAMjB,EAAY,OAuCdkB,oBAAqBC,IANzB,UAQI,cAACC,EAAA,EAAD,UAAU,cAAC,IAAD,CAAMvG,MAAO,CAAEqC,eAAgB,OAAQvB,MAAO,UAAWG,QAAS,KAAOqB,GAAG,WAA5E,uBACV,cAACiE,EAAA,EAAD,CAAUpE,QAASmD,EAAnB,kCC4E5B,SAASkB,GAAM3I,GACX,OACI,uBACIsD,GAAItD,EAAMsD,GACVsF,MAAI,EACJvI,MAAM,MACNwI,OAAO,EACPhG,UAAQ,EACRV,MAAO,CAAE2G,UAAW,QACpB/F,IAAK/C,EAAM+C,MAKvB,SAASgG,GAAgB9H,GACrBA,EAAEiH,cAAcc,gBAAgBH,OAAS5H,EAAEiH,cAAcc,gBAAgBH,MAG9DI,OAzKf,WACI,IAmDMhJ,EAnDYC,YAAW,CACzBgJ,aAAc,CACV5I,QAAS,OACTC,eAAgB,SAChBC,WAAY,UAEhB2I,cAAe,CACXC,UAAW,mIACXhJ,OAAQ,OACRC,MAAO,QAEXgJ,SAAU,CACNC,WAAY,wBACZC,SAAU,WACVtG,MAAO,WAEXuG,gBAAiB,CACbC,WAAY,IACZnJ,QAAS,OACToJ,cAAe,SACfnJ,eAAgB,SAChBC,WAAY,UAEhBmJ,aAAc,CACVrJ,QAAS,OACTC,eAAgB,eAChBqJ,SAAU,OACVrF,UAAW,OACXsF,IAAK,QAETC,eAAgB,CACZ1H,SAAU,YAEd2H,iBAAkB,CACd3H,SAAU,WACV4H,KAAM,IACNC,IAAK,IACL5J,MAAO,OACPD,OAAQ,OACR8J,WAAY,UACZZ,WAAY,qBACZhJ,QAAS,OACTE,WAAY,SACZD,eAAgB,SAChB0C,MAAO,OACPoB,gBAAiB,YACjBsC,QAAS,IACTwD,OAAQ,MAIAzJ,GAEhB,EAAwB9B,qBAAxB,mBAAOO,EAAP,KAAaiL,EAAb,KACA,EAAsCxL,oBAAS,GAA/C,mBAAOyL,EAAP,KAAoBC,EAApB,KACA,EAA8B1L,oBAAS,GAAvC,mBAAOiI,EAAP,KAAgBC,EAAhB,KACA,EAA4BlI,mBAAS,IAArC,mBAAO2L,EAAP,KAAeC,EAAf,KACQ3L,EAAgBkC,qBAAWxC,GAA3BM,YA4CR,OAzCAI,oBAAS,sBAAC,4BAAAiC,EAAA,sEACiBpD,EAASC,MAAM8H,IAAIhH,EAAYwH,KAAKoE,MADrD,OACFC,EADE,OAENN,EAAQM,EAAWC,QACnBL,GAAe,GAHT,2CAIP,IAGHrL,oBAAS,sBAAC,sBAAAiC,EAAA,6DACN4F,GAAW,GADL,SAKIhJ,EAASG,MACV2M,WADC,uCACU,WAAMzF,GAAN,iCAAAjE,EAAA,sDACJqJ,EAASpF,EAAS0F,KAAKC,KAAI,SAAAjF,GAAG,OAAIA,EAAI8E,UAItCI,EAA6B,GACxBC,EAAI,EANL,YAMQA,EAAIT,EAAOU,QANnB,0BAOmDV,EAAOS,GAAnDE,EAPP,EAOEC,IAAeC,EAPjB,EAOiBA,KAAMC,EAPvB,EAOuBA,MAPvB,EAO8BC,iBAC9BC,EAAOpG,EAAS0F,KAAKG,GAAG1H,GARxB,SASmBxF,EAASC,MAAM8H,IAAIuF,GAAMX,MAT5C,OASAe,EATA,SAUqDA,EAAWb,OAVhE,EAUEzE,gBAVF,EAUwCvB,SAGxCyG,IAASvM,EAAYwH,KACzB0E,EAA2B1J,KAAK,CAC5B6J,WACAK,OACAE,WAAYJ,EAAMJ,SAjBlB,QAM2BD,IAN3B,uBAqBRlE,GAAW,GAEX0D,EAAUO,GAvBF,4CADV,uDALJ,yDAgCP,IAIgB,GAAfV,EAAsB,cAACqB,EAAA,EAAD,CAAkBzI,MAAM,YAAYzB,UAAWvB,EAAQ0L,iBACzE,eAAC7D,EAAA,EAAD,CAAW3F,MAAO,CAAEkC,gBAAiB,GAAIhE,MAAO,OAAQkE,UAAW,QAAnE,UACI,cAACqC,GAAD,CAAWC,QAASA,EAASC,WAAYA,EAAY3H,KAAMA,IAC3D,eAACmC,EAAA,EAAD,CAAMC,WAAS,EAACY,MAAO,CAAE2G,UAAW,OAAQ8C,aAAc,QAA1D,UACI,cAACtK,EAAA,EAAD,CAAMQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAClCV,UAAWvB,EAAQiJ,aADvB,SAEI,cAACf,EAAA,EAAD,CAAQC,IAAI,UAAU5G,UAAWvB,EAAQkJ,cAAepG,IAAG,OAAE5D,QAAF,IAAEA,OAAF,EAAEA,EAAM+G,oBAEvE,cAAC5E,EAAA,EAAD,CAAMQ,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGV,UAAWvB,EAAQuJ,gBAA5D,SACI,gCACI,qBAAKhI,UAAWvB,EAAQoJ,SAAxB,SAAmClK,EAAKwF,WACxC,sBAAKxC,MAAO,CAAEc,MAAO,WAArB,UACI,sBAAMd,MAAO,CAAE+H,WAAY,MAAOjH,MAAO,UAAWsG,SAAU,SAA9D,SAA0EpK,EAAKgH,QAAQ8E,SAD3F,YAGA,qBAAK9I,MAAO,CAAEc,MAAO,WAArB,SAAmC9D,EAAK0F,kBAKpD,cAACgH,EAAA,EAAD,IAEA,qBAAKrK,UAAWvB,EAAQ0J,aAAxB,SAGQY,EAAOO,KAAI,SAAAgB,GACP,OACI,sBAAKtK,UAAWvB,EAAQ6J,eAAxB,UACI,cAACnB,GAAD,CACI5F,IAAK+I,EAASZ,SACd5H,GAAIwI,EAASP,MACRO,EAASP,MAElB,sBAAK/J,UAAWvB,EAAQ8J,iBACpBgC,YAAa,SAAC9K,GAAD,OAAOA,EAAEiH,cAAc/F,MAAMwE,QAAU,KACpDqF,WAAY,SAAC/K,GAAD,OAAOA,EAAEiH,cAAc/F,MAAMwE,QAAU,KACnDrC,QAASyE,GAHb,UAII,cAAC,IAAD,IAJJ,OAIuB+C,EAASL,WAJhC,IAIqE,IAAxBK,EAASL,WAAmB,OAAS,uB,4FC/IvG,SAASQ,GAAT,GAAiC,IAAdC,EAAa,EAAbA,WAqBxBjM,EAnBYC,YAAW,CACzBiM,WAAY,CACR7L,QAAS,QAEb8L,WAAY,CACR5J,WAAY,OACZpC,OAAQ,SACRC,MAAO,UAEXgM,eAAgB,CACZ7J,WAAY,QAEhB8J,YAAa,CACThD,WAAY,2BACZrG,MAAO,UACPsJ,cAAe,UAIP7L,GAEhB,EAA8B9B,mBAAS,IAAvC,6BAEA,OACI,sBAAK4C,UAAWvB,EAAQkM,WAAxB,UACI,cAAChE,EAAA,EAAD,CAAQC,IAAI,aAAa5G,UAAWvB,EAAQmM,WAAYrJ,IAAKmJ,EAAWhG,kBACxE,sBAAK1E,UAAWvB,EAAQoM,eAAxB,UACI,cAACxI,EAAA,EAAD,CAAYV,QAAQ,YAAY3B,UAAWvB,EAAQuM,QAAnD,SAA8DN,EAAWvH,WACzE,cAACd,EAAA,EAAD,CAAYV,QAAQ,QAAQ3B,UAAWvB,EAAQqM,YAA/C,SAA6DJ,EAAWO,oB,yBC3BzE,SAASC,GAAT,GAAuD,IAA/BC,EAA8B,EAA9BA,gBAAiB7F,EAAa,EAAbA,WAkC9C7G,EAhCYC,YAAW,CACzB0M,qBAAsB,CAElBxM,OAAQ,OACRC,MAAO,OACPC,QAAS,OACTuM,YAAa,YACbC,YAAa,QACbC,YAAa,WAEjBC,cAAe,CACX3M,MAAO,MACPD,OAAQ,OACR6M,OAAQ,OACRC,OAAQ,OACRC,QAAS,OACTC,YAAa,SACbC,WAAY,SACZ/D,WAAY,oBACZC,SAAU,SACV,uBAAwB,CACpBlJ,MAAO,MAGfiN,SAAU,CACNjN,MAAO,MACPiJ,WAAY,qBACZC,SAAU,QACVtG,MAAO,YAICvC,GAChB,EAA8B9B,mBAAS,IAAvC,mBAAO2O,EAAP,KAAgBC,EAAhB,KAMMC,EAAiB,uCAAG,kCAAAvM,EAAA,6DAElBwM,EAAsB,CACtBnC,KAAMoB,EAAgBpB,KACtBrF,gBAAiByG,EAAgBgB,oBACjChJ,SAAUgI,EAAgBhI,SAC1B8H,YAAac,EACbtH,UAAWnI,EAASK,oBAIxB2I,GAAW,GAXW,SAaChJ,EAASI,SAAS0P,IAAIF,GAbvB,cAalBxB,EAbkB,gBAgBFpO,EAASG,MAAM4H,IAAI8G,EAAgBpB,MAAMd,MAhBvC,cAgBlBoD,EAhBkB,OAiBlBC,EAAOD,EAAQlD,OAjBG,UAkBhB7M,EAASG,MAAM4H,IAAI8G,EAAgBpB,MAAMwC,OAAO,CAClD7P,SAAS,GAAD,oBAAM4P,EAAK5P,UAAX,CAAqBgO,EAAW5I,OAnBtB,QAqBtBwD,GAAW,GAIX0G,EAAW,IAzBW,4CAAH,qDA4BvB,OACI,sBAAKhM,UAAWvB,EAAQ2M,qBAAxB,UACI,0BACAoB,YAAY,mBACZxM,UAAWvB,EAAQ+M,cACnBlN,MAAOyN,EACP5J,SAtCkB,SAAC1C,GACvBuM,EAAWvM,EAAE2C,OAAO9D,UAsChB,cAACiI,EAAA,EAAD,CAAYzD,QAAS,WAAOmJ,KAAsBjM,UAAWvB,EAAQqN,SAArE,SACI,cAAC,KAAD,SClFD,SAASW,GAAT,GAA4C,IAApBtB,EAAmB,EAAnBA,gBAEnC,OACI,qBAAKxK,MAAO,CACR7B,QAAS,OACTC,eAAgB,WAChBC,WAAY,SACZ4B,SAAU,YAJd,SAMI,uBACI/B,MAAM,MACND,OAAO,MACPyC,UAAQ,EACR+F,MAAI,EACJC,OAAO,EACP9F,IAAK4J,EAAgBzB,SACrB/I,MAAO,CAAE2G,UAAW,Y,yBCTrB,SAASoF,GAAT,GAA0F,IAAD,EAAjEvB,EAAiE,EAAjEA,gBAAiBwB,EAAgD,EAAhDA,aAAcC,EAAkC,EAAlCA,mBAAoBtH,EAAc,EAAdA,WA4EhF7G,EA3EYC,YAAW,CACzBC,cAAe,CACXkE,gBAAiB,QACjBjC,SAAU,QACVhC,OAAQ,QACR6J,IAAK,gCACLD,KAAM,OACN1J,QAAS,OACTC,eAAgB,SAChB8N,UAAW,cAEf1E,aAAc,GAGd2E,eAAgB,CAEZjO,MAAO,OACPwM,YAAa,kBACbC,YAAa,QACbC,YAAa,WAKjBwB,qBAAsB,CAElBnO,OAAQ,OACRE,QAAS,OACTuM,YAAa,YACbC,YAAa,QACbC,YAAa,WAEjByB,cAAe,CACXnO,MAAO,MACPoO,OAAQ,OACRnO,QAAS,OACTE,WAAY,UAGhBkO,YAAa,CACTpF,WAAY,oBACZ9G,WAAY,QAEhB4J,WAAY,CACR5J,WAAY,OACZpC,OAAQ,OACRC,MAAO,QAEXsO,eAAgB,CACZtO,MAAO,MAEPC,QAAS,OACTC,eAAgB,SAChBC,WAAY,UAEhBoO,YAAa,CACTrF,SAAU,UACVtG,MAAO,WAEX4L,mBAAoB,CAEhBzO,OAAQ,8BAERE,QAAS,OACToJ,cAAe,SACfG,IAAK,OACLiF,SAAU,OACVzB,WAAY,SACZ,uBAAwB,CACpBhN,MAAO,OAMHK,GAEhB,OACKiM,EACG,eAACrL,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAWvB,EAAQE,cAAnC,UACI,cAACuB,EAAA,EAAD,CAAQC,QAAM,EAACC,QAAM,EAArB,SACI,cAACN,EAAA,GAAD,GAAMQ,MAAI,EAACC,GAAI,QAAf,mBAA2B,GAA3B,mBAAkC,GAAlC,mBAAyC,GAAzC,mBAAgD,GAAhD,0BAA8D9B,EAAQ0J,cAAtE,yBACI,cAACsE,GAAD,CAActB,gBAAiBA,KADnC,MAIJ,eAACrL,EAAA,EAAD,CAAMQ,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGV,UAAWvB,EAAQqO,eAA3D,UACI,sBAAK9M,UAAWvB,EAAQsO,qBAAxB,UACI,sBAAK/M,UAAWvB,EAAQuO,cAAxB,UACI,cAACrG,EAAA,EAAD,CAAQC,IAAI,aAAarF,IAAK4J,EAAgBgB,oBAAqBnM,UAAWvB,EAAQmM,aACtF,cAACvI,EAAA,EAAD,CAAYV,QAAQ,YAAY3B,UAAWvB,EAAQyO,YAAnD,8BAGJ,qBAAKlN,UAAWvB,EAAQ0O,eAAxB,SACI,cAAC5G,EAAA,EAAD,CAAYzD,QAAS,WAAQ8J,EAAmB,OAAhD,SAEI,cAAC,KAAD,CAAW5M,UAAWvB,EAAQ2O,qBAI1C,qBAAKpN,UAAWvB,EAAQ4O,mBAAxB,SAEQV,EAAarD,KAAI,SAACoB,GACd,OAAO,cAACD,GAAD,CAAgCC,WAAYA,GAA7BA,EAAW6C,WAI7C,cAACrC,GAAD,CAAeC,gBAAiBA,EAAiB7F,WAAYA,UA5BtD,K,yBC5EZ,SAASkI,KACpB,IA0RIC,EACAC,EA/MAjP,EA5EcC,aAAW,SAAC6G,GAAD,MAAY,CACrCoI,KAAM,CACF,QAAS,CACL1O,OAAQsG,EAAMtF,QAAQ,GACtB2L,YAAa,OAGrBgC,MAAO,CACH9O,QAAS,QAEb+O,cAAe,CACXhP,MAAO,QAEPkE,UAAW,QAEf+K,eAAgB,CACZhP,QAAS,OACToJ,cAAe,SACflJ,WAAY,SACZ+D,UAAW,OACXsF,IAAK,QAET0F,SAAU,CACNhG,SAAU,WAEdiG,YAAa,CACTjG,SAAU,WAEdkG,MAAO,CACHxM,MAAO,WAEXyM,QAAS,CACLzM,MAAO,WAEX6G,eAAgB,CACZ1H,SAAU,WACV9B,QAAS,OACTF,OAAQ,QAEZuL,eAAgB,CACZvJ,SAAU,WACV6H,IAAK,oBAET0F,2BAA4B,CACxBrP,QAAS,OACTD,MAAO,OACPE,eAAgB,gBAEpBqP,MAAO,CACHtP,QAAS,OACTE,WAAY,SACZD,eAAgB,UAEpBsP,MAAO,CACHxL,gBAAiB0C,EAAM+I,QAAQC,WAAWF,MAC1CzG,UAAWrC,EAAMiJ,QAAQ,GACzB5M,QAAS2D,EAAMtF,QAAQ,EAAG,EAAG,GAC7BpB,MAAO,OACPD,OAAQ,OACR6P,aAAc,OACdnM,UAAW,SACXqJ,QAAS,QAEb+C,wBAAyB,CACrB9N,SAAU,WACV+N,OAAQ,OACRnG,KAAM,SACNxH,WAAW,QACXsG,UAAW,OAEXxI,QAAS,OACToJ,cAAe,SACfnJ,eAAgB,mBAIVG,GAEd,EAA8B9B,oBAAS,GAAvC,mBAAOiI,EAAP,KAAgBC,EAAhB,KACA,EAAoClI,mBAAS,MAA7C,mBAAOwR,EAAP,KAAmBC,EAAnB,KACA,EAAwBzR,qBAAxB,mBAAOO,EAAP,KAAaiL,EAAb,KACA,EAAsCxL,oBAAS,GAA/C,mBAAOyL,EAAP,KAAoBC,EAApB,KACA,EAA8B1L,oBAAS,GAAvC,mBAAgB0R,GAAhB,WACA,EAA4B1R,mBAAS,IAArC,mBAAO2L,EAAP,KAAeC,EAAf,KACA,EAA8C5L,mBAAS,MAAvD,mBAAO+N,EAAP,KAAwByB,EAAxB,KACA,EAAwCxP,mBAAS,IAAjD,mBAAOuP,EAAP,KAAqBoC,EAArB,KACA,EAA8C3R,qBAA9C,mBAAO4R,EAAP,KAAwBC,EAAxB,KACQ5R,EAAgBkC,qBAAWxC,GAA3BM,YACR,GAAwBD,oBAAS,GAAjC,qBAAO2I,GAAP,MAAamJ,GAAb,MACA,GAAgD9R,mBAAS,IAAzD,qBAAO0M,GAAP,MAAyBqF,GAAzB,MAOMC,GAAc,WAEhBF,IAAQ,GACRG,MAyBEA,GAA2B,WAE7B,IAAMC,EAAiBxS,EAAQoH,IAAR,iBAAsBqL,SAAUzK,IAAI8J,GAC3DtJ,GAAW,GAGXgK,EAAevK,GAAG,iBAElB,SAAoBpB,GAECA,EAASC,iBAAmBD,EAASE,cAG1D,WAII,OAHAqC,QAAQC,IAAI,+CACZb,GAAW,QACX6J,GAAoB,OAGxB,WACIG,EAAe3L,SAASO,IAAIC,iBACvBqL,KADL,uCACU,WAAO7F,GAAP,mBAAAjK,EAAA,6DAGE+P,EAAmB,CACnB/S,SAAU,GACVmN,MAAO,GACPF,MACAC,KAAMvM,EAAYwH,IAClBJ,UAAWnI,EAASK,mBACpBmN,qBATF,SAakBxN,EAASG,MAAM2P,IAAIqD,GAbrC,cAaEC,EAbF,QAeEC,EAAmBhS,EAAKgH,SACX9E,KAAK6P,EAAQ5N,IAhB5B,SAiBIxF,EAASC,MAAM8H,IAAIhH,EAAYwH,KAAK0H,OAAO,CAC7C5H,QAASgL,IAlBX,OAqBFrK,GAAW,GACX6J,GAAoB,IAtBlB,4CADV,2DAjJmB,8CAkM3B,sBAAAzP,EAAA,6DACI4F,GAAW,GADf,SAIchJ,EAASG,MACVmT,QAAQ,YAAa,QACrBC,WAAWb,GACXc,MAAM,GACN1G,WAJC,uCAIU,WAAMzF,GAAN,uCAAAjE,EAAA,yDACqB,IAAzBiE,EAAS0F,KAAKI,OADV,uBAEJwF,EAAmB,MACnB3J,GAAW,GAHP,0BAMJyK,EAAYpM,EAAS0F,KAAKC,KAAI,SAAAjF,GAAG,OAAIA,EAAI8E,UAC7C8F,EAAmBtL,EAAS0F,KAAK1F,EAAS0F,KAAKI,OAAS,IAIpDF,EAA6B,GACxBC,EAAI,EAZL,YAYQA,EAAIuG,EAAUtG,QAZtB,0BAamDsG,EAAUvG,GAAtDE,EAbP,EAaEC,IAAeC,EAbjB,EAaiBA,KAAMC,EAbvB,EAauBA,MAAOC,EAb9B,EAa8BA,iBAC9BC,EAAOpG,EAAS0F,KAAKG,GAAG1H,GAdxB,UAemBxF,EAASC,MAAM8H,IAAIuF,GAAMX,MAf5C,QAeAe,EAfA,SAgBqDA,EAAWb,OAA7CgD,EAhBnB,EAgBEzH,gBAAsCvB,EAhBxC,EAgBwCA,SAG5CoG,EAA2B1J,KAAK,CAC5B6J,WACAyC,sBACAhJ,WACA4G,OACAkE,MAAOpE,EAAMmG,SAAS3S,EAAYwH,KAClCiF,qBAzBA,QAY8BN,IAZ9B,uBA6BRlE,GAAW,GAEX0D,EAAU,GAAD,oBAAKD,GAAWQ,IA/BjB,4CAJV,uDAJd,0DAlM2B,sBA8K3B9L,oBAAS,sBAAC,4BAAAiC,EAAA,sEAciBpD,EAASC,MAAM8H,IAAIhH,EAAYwH,KAAKoE,MAdrD,OAcFC,EAdE,OAeNN,EAAQM,EAAWC,QACnBL,GAAe,GAhBT,2CAiBP,IA+CHrL,oBAAS,sBAAC,4BAAAiC,EAAA,6DACN4F,GAAW,GADL,SAKIhJ,EAASG,MACVmT,QAAQ,YAAa,QACrBE,MAAM,IACN1G,WAHC,uCAGU,WAAMzF,GAAN,uCAAAjE,EAAA,0DACJsP,EADI,iDAEJjG,EAASpF,EAAS0F,KAAKC,KAAI,SAAAjF,GAAG,OAAIA,EAAI8E,UAE1C8F,EAAmBtL,EAAS0F,KAAK1F,EAAS0F,KAAKI,OAAS,IAIpDF,EAA6B,GACxBC,EAAI,EATL,YASQA,EAAIT,EAAOU,QATnB,0BAUmDV,EAAOS,GAAnDE,EAVP,EAUEC,IAAeC,EAVjB,EAUiBA,KAAMC,EAVvB,EAUuBA,MAAOC,EAV9B,EAU8BA,iBAC9BC,EAAOpG,EAAS0F,KAAKG,GAAG1H,GAXxB,UAYmBxF,EAASC,MAAM8H,IAAIuF,GAAMX,MAZ5C,QAYAe,EAZA,SAaqDA,EAAWb,OAA7CgD,EAbnB,EAaEzH,gBAAsCvB,EAbxC,EAawCA,SAE5CoG,EAA2B1J,KAAK,CAC5B6J,WACAyC,sBACAhJ,WACA4G,OACAkE,MAAOpE,EAAMmG,SAAS3S,EAAYwH,KAClCiF,qBArBA,QAS2BN,IAT3B,uBAyBRlE,GAAW,GAEX0D,EAAUO,GA3BF,4CAHV,uDALJ,cAIF0G,EAJE,yBAsCCA,GAtCD,2CAuCP,IASHxS,qBAAU,WACN,IAAIyS,EAAWC,SAASC,iBAAiB,SA4CrC3C,GAA8BA,EAA6B4C,aAC3D3C,GAAwBA,EAAuB4C,YACnD7C,EAA+B,IAAI8C,sBAjCnC,SAAsCC,GAClCA,EAAQC,SAAQ,SAAAC,GACZ,IAAIpE,EAAOoE,EAAMtO,OAGjBkK,EAAKqE,OAAOnB,MAAK,YACgB,IAAzBkB,EAAME,gBAA0BtE,EAAKuE,cAGjDL,EAAQC,SAAQ,SAAAC,GACZ,IAAIpE,EAAOoE,EAAMtO,OACjB,GAAIsO,EAAME,eAAgB,CACtB,IAAIE,EAAiBxE,EAAKyE,wBAC1BvK,OAAOwK,SAAS,CACZvI,IAAKqI,EAAerI,IACpBD,KAAMsI,EAAetI,KACrByI,SAAU,iBA3BgB,CACtCtD,KAAM,KACNuD,WAAY,MACZC,UAAW,QA0CfzD,EAAyB,IAAI6C,sBAb7B,SAAgCC,GAC5BA,EAAQC,SAAQ,SAAAC,GACRA,EAAME,kBAnUK,oCAoUXQ,GACA1D,EAAuB2D,UAAUX,EAAMtO,cA/Bf,CAChCuL,KAAM,KACNuD,WAAY,MACZC,UAAW,QAsCfjB,EAASO,SAAQ,SAACnE,EAAMgF,GACpB7D,EAA6B8D,QAAQjF,GACjCgF,IAAQpB,EAASzG,OAAS,GAAGiE,EAAuB6D,QAAQjF,QAErE,CAACvD,IAGJ,IAAMyI,GAAW,uCAAG,WAAOzH,EAAMkE,GAAb,qBAAAvO,EAAA,sEAMIpD,EAASG,MAAM4H,IAAI0F,GAAMd,MAN7B,OAMZoD,EANY,OAOZC,EAAOD,EAAQlD,OAEN,GAAT8E,GACIpE,EAAQyC,EAAKzC,MACjBvN,EAASG,MAAM4H,IAAI0F,GAAMwC,OAAO,CAC5B,MAAQ,GAAR,oBAAa1C,GAAb,CAAoBxM,EAAYwH,QAEpCiK,GAAW,KAGPjF,EAAQyC,EAAKzC,MAAM4H,QAAO,SAAAC,GAC1B,OAAOA,IAAerU,EAAYwH,OAEtCvI,EAASG,MAAM4H,IAAI0F,GAAMwC,OAAO,CAC5B,MAAS1C,IAEbiF,GAAW,IAvBC,2CAAH,wDA2BX6C,GAAa,uCAAG,WAAOrH,GAAP,SAAA5K,EAAA,6DAElBkN,EAAmBtC,GAFD,SAKMhO,EAASI,SAASkT,QAAQ,YAAa,QAAQxG,WAA/C,uCAA0D,WAAMzF,GAAN,+BAAAjE,EAAA,sDAK9E,IAJIhD,EAAWiH,EAAS0F,KAAKC,KAAI,SAAAjF,GAAG,OAAIA,EAAI8E,UAGxCyI,EAA+B,GAC1BpI,EAAI,EAAGA,EAAI9M,EAAS+M,OAAQD,IAAM,EACgB9M,EAAS8M,GAA1D9E,EADgC,EAChCA,gBAAiBuG,EADe,EACfA,YAAa9H,EADE,EACFA,SAAU4G,EADR,EACQA,KAC1CwD,EAAO5J,EAAS0F,KAAKG,GAAG1H,GAC5B8P,EAA6B/R,KAAK,CAAE6E,kBAAiBuG,cAAa9H,WAAU4G,OAAMwD,SAItFqE,EAA+BA,EAA6BH,QAAO,SAAC/G,GAChE,OAAOA,EAAWX,QAAUO,EAAWA,EAASP,KAAO,OAK3DgF,EAAgB6C,GAlB8D,2CAA1D,uDALN,yDAAH,sDA6BnB,OACmB,GAAf/I,EAAsB,cAACqB,EAAA,EAAD,CAAkBzI,MAAM,YAAYzB,UAAWvB,EAAQ0L,iBACzE,qCACI,cAAC/E,GAAD,CAAWC,QAASA,EAASC,WAAYA,EAAY3H,KAAMA,IAC3D,cAACkU,GAAA,EAAD,CACI,kBAAgB,yBAChB,mBAAiB,+BACjB7R,UAAWvB,EAAQ2P,MACnBrI,KAAMA,GACNgB,QAASqI,GACT0C,sBAAoB,EACpBC,kBAAmBC,KACnBC,cAAe,CACXC,QAAS,KATjB,SAYI,cAACjL,EAAA,EAAD,CAAMkL,GAAIpM,GAAV,SACI,sBAAK/F,UAAWvB,EAAQ4P,MAAxB,UACI,oBACI1N,MAAO,CACHmH,WAAY,yBAFpB,6BAIA,8BACI,cAACjG,EAAA,EAAD,CACIC,GAAG,iBACHC,MAAM,oBACNJ,QAAQ,WACRK,KAAK,OACLC,WAAS,EACTR,MAAM,YACNd,MAAO,CAAEyJ,aAAc,QACvB9L,MAAOwL,GACP3H,SAAU,SAAC1C,GAAD,OAAO0P,GAAoB1P,EAAE2C,OAAO9D,YAEtD,cAACqE,EAAA,EAAD,CACIb,GAAG,YACHH,QAAQ,WACRF,MAAM,YACNqB,QAASsM,GAJb,0BAQZ,eAAC9I,EAAA,EAAD,CAAWtG,UAAWvB,EAAQoP,cAA9B,UACI,8BACI,qBAAK7N,UAAU,cAAf,SACI,sBAAKA,UAAWvB,EAAQkP,KAAxB,UACI,uBAAOyE,OAAO,OAAOpS,UAAWvB,EAAQmP,MAAO9L,GAAG,mBAAmBE,KAAK,OACtEG,SAtVR,SAAC1C,GAAO,IAAD,EAC3BA,EAAEE,iBAGF,IAAI4D,EAAI,OAAG9D,QAAH,IAAGA,GAAH,UAAGA,EAAG2C,cAAN,aAAG,EAAW4C,MAAM,GAE5B,GAAKzB,EAAL,CAMA,GAAIA,EAAKrB,KAAL,QAA4B,GAG5B,OAFAmQ,MAAM,oCACNxD,EAAc,MAIlBA,EAActL,GA1Bd2L,IAAQ,QAeJL,EAAc,SAiVM,uBAAOlO,MAAO,CAAEiL,YAAa,KAAO0G,QAAQ,mBAA5C,SACI,cAAC3P,EAAA,EAAD,CAAQhB,QAAQ,WAAWF,MAAM,YAAY8Q,UAAU,OAAO3P,SAAUyC,EAASmN,QAAS,cAAC,KAAD,IAA1F,6BAOhB,qBAAKxS,UAAWvB,EAAQqP,eAAxB,SACK/E,EAAOO,KAAI,SAACgB,GACT,OACI,sBAAKtK,UAAWvB,EAAQ6J,eAAxB,UACI,cAAC,GAAD,CACI/G,IAAK+I,EAASZ,SACd5H,GAAIwI,EAASP,KACblC,SAAUyC,EAASnH,WAEvB,sBAAKnD,UAAWvB,EAAQiQ,wBAAxB,UACI,sBACI/N,MAAO,CACHiB,QAAS,SACTH,MAAO,UACPqG,WAAY,yBAJpB,UAMI,sBACInH,MAAO,CACHc,MAAO,UACPoB,gBAAiB,UACjBjB,QAAS,UACT6M,aAAc,MACd/F,WAAY,OACZX,SAAU,SAPlB,SAQO,kCAAKuC,EAASnH,cAdzB,SAeWmH,EAASR,oBAEpB,sBAAK9J,UAAWvB,EAAQ0P,2BAAxB,UACI,cAACxH,EAAA,EAAD,CAAQC,IAAI,UAAUjG,MAAO,CAAE/B,OAAQ,SAAUC,MAAO,UAAY0C,IAAK+I,EAAS6B,sBAClF,cAAC,KAAD,CACInM,UAAW,CAACvB,EAAQsP,SAAUzD,EAAS2D,MAAQxP,EAAQwP,MAAQxP,EAAQyP,SACvEpL,QAAS,kBAAM0O,GAAYlH,EAASP,KAAMO,EAAS2D,UAEvD,cAAC,KAAD,CACIjO,UAAW,CAACvB,EAAQuP,YAAavP,EAAQyP,SACzCpL,QAAS,WAAQ6O,GAAcrH,cAhCFA,EAASP,cA0CtE,cAAC2C,GAAD,CAAcvB,gBAAiBA,EAAiBwB,aAAcA,EAAcC,mBAAoBA,EAAoBtH,WAAYA,OAKhJ,SAAS6B,GAAM3I,GACX,OACI,mCACI,uBACIsE,QAASyE,GACTF,OAAO,EACPvF,GAAItD,EAAMsD,GACVP,IAAK/C,EAAM+C,QAQ3B,SAASgG,GAAgB9H,GACrBA,EAAE2C,OAAOiF,OAAS5H,EAAE2C,OAAOiF,M,4BC1f/B,SAASoL,GAAT,GAAoE,IAA3BC,EAA0B,EAA5CC,iBAAgCC,EAAY,kBACzDvV,EAAgBkC,qBAAWxC,GAA3BM,YACR,OACE,cAAC,IAAD,2BAAWuV,GAAX,IAAsBC,OAAQ,SAACrU,GAC7B,OAAwB,OAAhBnB,EAAwB,cAACqV,EAAD,eAAelU,IAAW,cAAC,IAAD,CAAUyE,GAAG,eAK9D6P,OA1Bf,WACE,OAEE,cAAC5V,EAAD,UACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAO6V,KAAK,SAASR,UAAWhU,IAChC,cAAC,IAAD,CAAOwU,KAAK,UAAUR,UAAWS,IACjC,cAACP,GAAD,CAAcM,KAAK,WAAWJ,iBAAkBlL,KAChD,cAACgL,GAAD,CAAcM,KAAK,IAAIJ,iBAAkBnF,aCPpCyF,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB3D,MAAK,YAAkD,IAA/C4D,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASZ,OAEL,cAAC,GAAD,IACF1C,SAASuD,eAAe,SAM1BT,O","file":"static/js/main.95f63b88.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\nimport 'firebase/storage';\r\n\r\nfirebase.initializeApp(\r\n    {\r\n        apiKey: \"AIzaSyDSeECva7LxaNLnP83MTyyV_j_4LVS8DiU\",\r\n        authDomain: \"fir-96e46.firebaseapp.com\",\r\n        projectId: \"fir-96e46\",\r\n        storageBucket: \"fir-96e46.appspot.com\",\r\n        messagingSenderId: \"325781789442\",\r\n        appId: \"1:325781789442:web:684a155937c9a34863001b\"\r\n\r\n      }\r\n)\r\n\r\n\r\nlet auth = firebase.auth();\r\n\r\nexport default auth;\r\nexport const firestore = firebase.firestore();\r\nexport const database = {\r\n    users: firestore.collection(\"users\"),\r\n    posts: firestore.collection(\"posts\"),\r\n    comments: firestore.collection(\"comments\"),\r\n    getUserTimeStamp: firebase.firestore.FieldValue.serverTimestamp\r\n}\r\nexport const storage = firebase.storage();","import React, { useState, useEffect } from 'react';\r\nimport auth from '../firebase'\r\nexport const AuthContext = React.createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\n    const [currentUser, setCurrentUser] = useState();\r\n    const [loader, setloader] = useState(true);\r\n\r\n    // Loose Coupling\r\n    // Wrapping auth functions in a generic fashion \r\n    const login = (email, password) => {\r\n        return auth.signInWithEmailAndPassword(email, password);\r\n    }\r\n    const signout = () => {\r\n        return auth.signOut();\r\n    }\r\n    const signup = (email, password) => {\r\n        return auth.createUserWithEmailAndPassword(email, password);\r\n    }\r\n\r\n    useEffect(() => {\r\n        // Adding an real-time event listener functionality which is monitored by firebase\r\n        // Whenever, auth's State will be changed, this \"onAuthStateChanged\" listener will be triggered [ If user auth logged in ? -> user : -> null ]\r\n        const unsubscribeAuthentication = auth.onAuthStateChanged(user => {\r\n            setCurrentUser(user);\r\n            setloader(false);\r\n        })\r\n\r\n        return unsubscribeAuthentication;\r\n    }, []);\r\n\r\n    // These values may be used @ any level or depth in the application so pass it via context @Top-level\r\n    let AuthValues = { currentUser, signout, login, signup }\r\n\r\n    return (\r\n        // This provider value will be applied to AuthProvider Component's children\r\n        <AuthContext.Provider value={AuthValues}>\r\n            {!loader && children}\r\n        </AuthContext.Provider>\r\n    );\r\n}","import React, { useContext, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { AuthContext } from '../Context/AuthProvider';\r\nimport { Container, Grid, makeStyles, TextField, Button, Card, CardMedia, Typography, Hidden, LinearProgress } from '@material-ui/core';\r\nimport Carousel from 'react-material-ui-carousel'\r\n\r\nexport default function Login(props) {\r\n    const useStyles = makeStyles({\r\n        mainContainer: {\r\n            height: \"100vh\",\r\n            width: \"80vw\",\r\n            // backgroundColor: \"lightgreen\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            margin: \"auto\"\r\n        },\r\n    })\r\n    const classes = useStyles();\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [error, setError] = useState(false);\r\n    const [loader, setLoader] = useState(false);\r\n    const { login } = useContext(AuthContext);\r\n\r\n    const handleSubmit = async (e) => {\r\n        // Prevent default action of a submit button\r\n        e.preventDefault();\r\n        try {\r\n            setLoader(true);\r\n            await login(email, password);\r\n            setLoader(false);\r\n\r\n            // This case is handled when manually routing from the '/login' route\r\n            props.history.push(\"/\");\r\n        } catch (error) {\r\n            setLoader(false);\r\n            setError(true);\r\n            setEmail(\"\");\r\n            setPassword(\"\");\r\n        }\r\n    }\r\n\r\n    return (\r\n\r\n        <div>\r\n            <Grid container className={classes.mainContainer} spacing={4}>\r\n                <Hidden xsDown smDown mdDown>\r\n                    <Grid item xs={6} sm={6} md={6} lg={7}>\r\n                        <div style={{ position: \"relative\" }}>\r\n                            <CardMedia\r\n                                image=\"https://www.instagram.com/static/images/homepage/home-phones.png/43cc71bb1b43.png\"\r\n                                style={{ backgroundSize: \"contain\", height: \"86vh\", position: \"relative\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}\r\n                            >\r\n                                <div style={{ height: \"26rem\", width: \"15rem\", marginLeft: \"5.5rem\" }}>\r\n                                    <Carousel animation=\"fade\" indicators={false} swipe={false} navButtonsAlwaysInvisible={true} autoPlay interval=\"5000\">\r\n                                        <img src=\"https://www.instagram.com/static/images/homepage/screenshot1.jpg/d6bf0c928b5a.jpg\" />\r\n                                        <img src=\"https://www.instagram.com/static/images/homepage/screenshot2.jpg/6f03eb85463c.jpg\" />\r\n                                        <img src=\"https://www.instagram.com/static/images/homepage/screenshot4.jpg/842fe5699220.jpg\" />\r\n                                        <img src=\"https://www.instagram.com/static/images/homepage/screenshot5.jpg/0a2d3016f375.jpg\" />\r\n                                    </Carousel>\r\n                                </div>\r\n                            </CardMedia>\r\n                        </div>\r\n                    </Grid>\r\n                </Hidden>\r\n                <Grid item xs={11} sm={8} md={6} lg={5}>\r\n                    {loader ? <LinearProgress color=\"secondary\" /> : null}\r\n                    <Card variant=\"outlined\"\r\n                        style={{ padding: \"1rem\" }}>\r\n                        <CardMedia\r\n                            image=\"https://www.logo.wine/a/logo/Instagram/Instagram-Wordmark-Black-Logo.wine.svg\"\r\n                            style={{ backgroundSize: \"contain\", height: \"8rem\", }} />\r\n                        <Grid container spacing={1}>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <TextField\r\n                                    id=\"outlined-email-input\"\r\n                                    label=\"Email\"\r\n                                    type=\"email\"\r\n                                    variant=\"outlined\"\r\n                                    value={email}\r\n                                    fullWidth={true}\r\n                                    size=\"small\"\r\n                                    onChange={(e) => { setEmail(e.target.value) }}\r\n                                />\r\n                            </Grid>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <TextField\r\n                                    id=\"outlined-password-input\"\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    variant=\"outlined\"\r\n                                    value={password}\r\n                                    fullWidth={true}\r\n                                    size=\"small\"\r\n                                    onChange={(e) => { setPassword(e.target.value) }}\r\n                                />\r\n                            </Grid>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <Typography\r\n                                    style={{ textAlign: \"center\" }}\r\n                                    variant=\"body1\"\r\n                                    gutterBottom>\r\n                                    <LinkButton content=\"Forgot Password?\"\r\n                                        routeLink=\"/signup\"></LinkButton>\r\n                                </Typography>\r\n                            </Grid>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    disabled={loader}\r\n                                    fullWidth={true}\r\n                                    size=\"medium\"\r\n                                    style={{ backgroundColor: \"#2e86de\", color: \"#ffffff\" }}\r\n                                    onClick={handleSubmit}>Login\r\n                                </Button>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Card>\r\n                    <Card\r\n                        variant=\"outlined\"\r\n                        style={{ marginTop: \"2rem\" }}>\r\n                        <Typography\r\n                            style={{ textAlign: \"center\", padding: \"0.5rem\" }}\r\n                            variant=\"body1\"\r\n                            gutterBottom>\r\n                            Don't have an account? <LinkButton content=\"Sign up\"\r\n                                routeLink=\"/signup\" />\r\n                        </Typography>\r\n                    </Card>\r\n                </Grid>\r\n            </Grid >\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nfunction LinkButton({ content, routeLink }) {\r\n    return (\r\n        <Link style={{ textDecoration: \"none\", color: \"#2e86de\" }} to={routeLink}>{content}</Link>\r\n    );\r\n}","import { func } from 'prop-types';\r\nimport React, { useState, useContext } from 'react';\r\nimport { AuthContext } from '../Context/AuthProvider';\r\nimport { storage, firestore, database } from '../firebase';\r\nimport { Link } from 'react-router-dom';\r\nimport { Grid, makeStyles, TextField, Button, Card, CardMedia, Typography, LinearProgress } from '@material-ui/core';\r\nimport BackupIcon from '@material-ui/icons/Backup';\r\n\r\nexport default function Signup(props) {\r\n    const useStyles = makeStyles({\r\n        mainContainer: {\r\n            height: \"100vh\",\r\n            width: \"75vw\",\r\n            // backgroundColor: \"lightgreen\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            margin: \"auto\"\r\n        },\r\n    })\r\n    const classes = useStyles();\r\n\r\n    const [username, setUsername] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [userBio, setUserBio] = useState(\"\");\r\n    const [loader, setLoader] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n    const [file, setFile] = useState(null);\r\n    const { signup } = useContext(AuthContext);\r\n\r\n    const handleFileInput = (e) => {\r\n        // Optional Chaining, if exists value else undefined\r\n        let file = e?.target?.files[0];\r\n\r\n        if (file) {\r\n            // console.log(file);\r\n            setFile(file);\r\n        }\r\n    }\r\n\r\n    const handleSignUp = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            setLoader(true);\r\n\r\n            // 1. Signup user\r\n            let res = await signup(email, password);\r\n            let userUniqueID = res.user.uid;\r\n            const uploadFilesListener = storage.ref(`/users/${userUniqueID}`).put(file);\r\n\r\n            // Firebase listener takes, three callback functions\r\n            // fn1 -> progress\r\n            // fn2 -> error \r\n            // fn3-> success\r\n            uploadFilesListener.on('state_changed', progressTrackFn, errorFn, successFn);\r\n\r\n            function progressTrackFn(snapshot) {\r\n                let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                // console.log(progress);\r\n            }\r\n            function errorFn(error) {\r\n                setError(error);\r\n                setLoader(false);\r\n            }\r\n            async function successFn() {\r\n                // Get link of profile picture to store.\r\n                let downloadFileURL = await uploadFilesListener.snapshot.ref.getDownloadURL();\r\n                database.users.doc(userUniqueID).set({\r\n                    email,\r\n                    userId: userUniqueID,\r\n                    username,\r\n                    createdAt: database.getUserTimeStamp(),\r\n                    profileImageURL: downloadFileURL,\r\n                    postIds: [],\r\n                    userBio\r\n                })\r\n\r\n                setLoader(false);\r\n                props.history.push(\"/\");\r\n            }\r\n        }\r\n        catch (error) {\r\n            setError(error);\r\n            setLoader(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Grid container className={classes.mainContainer} spacing={3}>\r\n                <Grid item xs={12} sm={9} md={7} lg={5}>\r\n                    {loader ? <LinearProgress color=\"secondary\" /> : null}\r\n                    <Card variant=\"outlined\"\r\n                        style={{ padding: \"1rem\" }}>\r\n                        <CardMedia\r\n                            image=\"https://www.logo.wine/a/logo/Instagram/Instagram-Wordmark-Black-Logo.wine.svg\"\r\n                            style={{ backgroundSize: \"contain\", height: \"10rem\", }} />\r\n                        <Grid container spacing={1}>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <Typography\r\n                                    style={{ textAlign: \"center\" }}\r\n                                    variant=\"h6\"\r\n                                    gutterBottom\r\n                                    size=\"small\"\r\n                                    style={{ color: \"#8395a7\", textAlign: \"center\" }}>\r\n                                    Sign up to see photos and videos from your friends.\r\n                                </Typography>\r\n                            </Grid>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <TextField\r\n                                    id=\"outlined-email-input\"\r\n                                    label=\"Email\"\r\n                                    type=\"email\"\r\n                                    variant=\"outlined\"\r\n                                    value={email}\r\n                                    fullWidth={true}\r\n                                    size=\"small\"\r\n                                    onChange={(e) => { setEmail(e.target.value) }}\r\n                                />\r\n                            </Grid>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <TextField\r\n                                    id=\"outlined-password-input\"\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    variant=\"outlined\"\r\n                                    value={password}\r\n                                    fullWidth={true}\r\n                                    size=\"small\"\r\n                                    onChange={(e) => { setPassword(e.target.value) }}\r\n                                />\r\n                            </Grid>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <TextField\r\n                                    id=\"outlined-username-input\"\r\n                                    label=\"Username\"\r\n                                    type=\"text\"\r\n                                    variant=\"outlined\"\r\n                                    value={username}\r\n                                    fullWidth={true}\r\n                                    size=\"small\"\r\n                                    onChange={(e) => { setUsername(e.target.value) }}\r\n                                />\r\n                            </Grid>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <TextField\r\n                                    id=\"outlined-username-input\"\r\n                                    label=\"Bio\"\r\n                                    type=\"text\"\r\n                                    variant=\"outlined\"\r\n                                    value={userBio}\r\n                                    fullWidth={true}\r\n                                    size=\"small\"\r\n                                    onChange={(e) => { setUserBio(e.target.value) }}\r\n                                />\r\n                            </Grid>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <Button\r\n                                    variant=\"outlined\"\r\n                                    color=\"secondary\"\r\n                                    fullWidth={true}\r\n                                    size=\"medium\"\r\n                                    onChange={(e) => { handleFileInput(e) }}\r\n                                    startIcon={<BackupIcon />}>UPLOAD PROFILE IMAGE\r\n                                    <TextField\r\n                                        type=\"file\"\r\n                                        style={{ opacity: \"0\", position: \"absolute\", width: \"100%\", height: \"100%\" }}>\r\n                                    </TextField>\r\n                                </Button>\r\n                            </Grid>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <Button\r\n                                    variant=\"contained\"\r\n                                    // color=\"primary\"\r\n                                    fullWidth={true}\r\n                                    style={{ backgroundColor: \"#2e86de\", color: \"#ffffff\" }}\r\n                                    size=\"medium\"\r\n                                    disabled={loader}\r\n                                    onClick={handleSignUp}>SIGN UP\r\n                                </Button>\r\n                            </Grid>\r\n                            <Grid\r\n                                item xs={12} sm={12} md={12} lg={12}>\r\n                                <Typography\r\n                                    style={{ textAlign: \"center\" }}\r\n                                    variant=\"body2\"\r\n                                    gutterBottom\r\n                                    size=\"small\">\r\n                                    By signing up, you agree to our Terms, Data Policy and Cookies Policy.\r\n                                </Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Card>\r\n                    <Card\r\n                        variant=\"outlined\"\r\n                        style={{ marginTop: \"2rem\" }}>\r\n                        <Typography\r\n                            style={{ textAlign: \"center\", padding: \"0.5rem\" }}\r\n                            variant=\"body1\"\r\n                            gutterBottom>\r\n                            Have an account? <LinkButton content=\"Log In\"\r\n                                routeLink=\"/login\" />\r\n                        </Typography>\r\n                    </Card>\r\n                </Grid>\r\n            </Grid>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction LinkButton({ content, routeLink }) {\r\n    return (\r\n        <Link style={{ textDecoration: \"none\", color: \"#2e86de\" }} to={routeLink}>{content}</Link>\r\n    );\r\n}","import React, { useState, useContext, useEffect } from 'react';\r\nimport { AppBar, makeStyles, Toolbar, Avatar, Container, IconButton, LinearProgress, Menu, MenuItem, Fade } from '@material-ui/core';\r\nimport { AuthContext }  from '../Context/AuthProvider';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function HeaderBar({loading, setLoading, user}) {\r\n    const useStyles = makeStyles((theme) => ({\r\n        appBar: {\r\n            height: \"4rem\",\r\n            display: \"flex\",\r\n            backgroundColor: \"white\"\r\n        },\r\n        toolBar: {\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            // backgroundColor: \"yellow\",\r\n            width: \"80vw\",\r\n            margin: \"auto\",\r\n            padding: \"0\"\r\n        },\r\n        iconContainer: {\r\n            // backgroundColor: \"lightgreen\",\r\n            width: \"12rem\",\r\n            marginLeft: \"0\",\r\n            marginRight: \"0\"\r\n        },\r\n        iconButton: {\r\n            color: \"black\",\r\n            // backgroundColor: \"pink\"\r\n        },\r\n    }))\r\n\r\n    let classes = useStyles();\r\n    const { signout } = useContext(AuthContext);\r\n\r\n    // Managing menu options\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n    const handleAnchorElClick = (e) => setAnchorEl(e.currentTarget);\r\n    const handleClose = () => setAnchorEl(null);\r\n\r\n    const handleSignOut = async (e) => {\r\n        try {\r\n            setLoading(true);\r\n            await signout();\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.log(error);\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <AppBar className={classes.appBar} position=\"fixed\">\r\n                {loading ? <LinearProgress color=\"secondary\" /> : null}\r\n\r\n                <Toolbar\r\n                    className={classes.toolBar}\r\n                    variant=\"dense\">\r\n                    \r\n                    {/* <Typography variant=\"subtitle1\" className={classes.profileName}>Rupesh_Sharma</Typography> */}\r\n                    <img height=\"100%\" width=\"250vw\" src=\"http://gunksclimbers.org/wp-content/uploads/2016/11/reel-rock-11-logo-e1479957179399.png\" />\r\n                    <Container className={classes.iconContainer}>\r\n                        <IconButton className={classes.iconButton}>\r\n                            <Link to=\"/\" style={{textDecoration: \"none\", color: \"inherit\"}} >\r\n                                <HomeIcon onClick={() => { window.scrollTo(0, 0) }} />\r\n                            </Link>\r\n                        </IconButton>\r\n                        <IconButton onClick={handleAnchorElClick}>\r\n                            <Avatar alt=\"Profile\" style={{ height: \"1.5rem\", width: \"1.5rem\" }} src={user?.profileImageURL} />\r\n                        </IconButton>\r\n                        <Menu\r\n                            id=\"fade-menu\"\r\n                            anchorEl={anchorEl}\r\n                            keepMounted\r\n                            open={open}\r\n                            onClose={handleClose}\r\n                            TransitionComponent={Fade}\r\n                        >\r\n                            <MenuItem><Link style={{ textDecoration: \"none\", color: \"inherit\", padding: \"0\" }} to=\"/profile\">Profile</Link></MenuItem>\r\n                            <MenuItem onClick={handleSignOut}>Logout</MenuItem>\r\n                        </Menu>\r\n                    </Container>\r\n                </Toolbar>\r\n            </AppBar>\r\n        </div>\r\n    )\r\n}","import React, { useState, useEffect, useContext } from 'react';\r\nimport { makeStyles, Grid, Avatar, Container, Divider, CircularProgress } from '@material-ui/core';\r\nimport LikeIcon from '@material-ui/icons/FavoriteBorder';\r\nimport HeaderBar from './HeaderBar';\r\nimport { AuthContext } from '../Context/AuthProvider';\r\nimport { database } from '../firebase';\r\n\r\nfunction Profile() {\r\n    const useStyles = makeStyles({\r\n        imageSection: {\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        userImageIcon: {\r\n            boxShadow: \"rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset\",\r\n            height: \"8rem\",\r\n            width: \"8rem\",\r\n        },\r\n        userName: {\r\n            fontFamily: \"Quicksand, sans-serif\",\r\n            fontSize: \"xx-large\",\r\n            color: \"#485460\",\r\n        },\r\n        userDescription: {\r\n            lineHeight: \"2\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        videoSection: {\r\n            display: \"flex\",\r\n            justifyContent: \"space-around\",\r\n            flexWrap: \"wrap\",\r\n            marginTop: \"2rem\",\r\n            gap: \"2rem\",\r\n        },\r\n        videoContainer: {\r\n            position: \"relative\",\r\n        },\r\n        overlayContainer: {\r\n            position: \"absolute\",\r\n            left: \"0\",\r\n            top: \"0\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            fontWeight: \"lighter\",\r\n            fontFamily: \"Roboto, sans-serif\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            color: '#fff',\r\n            backgroundColor: \"#211e1e8c\",\r\n            opacity: \"0\",\r\n            zIndex: \"2\",\r\n        },\r\n    })\r\n\r\n    const classes = useStyles();\r\n\r\n    const [user, setUser] = useState();\r\n    const [pageLoading, setPageLoading] = useState(true);\r\n    const [loading, setLoading] = useState(false);\r\n    const [videos, setVideos] = useState([]);\r\n    const { currentUser } = useContext(AuthContext);\r\n\r\n    // Get currentuser Data\r\n    useEffect(async () => {\r\n        let dataObject = await database.users.doc(currentUser.uid).get();\r\n        setUser(dataObject.data());\r\n        setPageLoading(false);\r\n    }, [])\r\n\r\n    // Get all posts to display in feed\r\n    useEffect(async () => {\r\n        setLoading(true);\r\n\r\n        // Since snapshot is realtime we receive from unsubscribe function which has to be returned during cleanup\r\n        let unsubscribe =\r\n            await database.posts\r\n                .onSnapshot(async snapshot => {\r\n                    let videos = snapshot.docs.map(doc => doc.data());\r\n\r\n                    // Extract videosURL from post collection and user's data from user collection\r\n                    // ProfileImg of the author of the post(video)\r\n                    let videosDataArrFromFireStore = [];\r\n                    for (let i = 0; i < videos.length; i++) {\r\n                        let { url: videoUrl, auid, likes, videoDescription } = videos[i];\r\n                        let puid = snapshot.docs[i].id;\r\n                        let userObject = await database.users.doc(auid).get();\r\n                        let { profileImageURL: userProfileImageURL, username } = userObject.data();\r\n\r\n                        // For likes, check if current user has liked the post\r\n                        if (auid === currentUser.uid)\r\n                        videosDataArrFromFireStore.push({\r\n                            videoUrl,\r\n                            puid,\r\n                            likesCount: likes.length,\r\n                        });\r\n                    }\r\n\r\n                    setLoading(false);\r\n                    // Set Received videos for further dispaly in feed\r\n                    setVideos(videosDataArrFromFireStore);\r\n                })\r\n        \r\n    }, [])\r\n\r\n    return (\r\n        \r\n        pageLoading == true ? <CircularProgress color=\"secondary\" className={classes.circularLoader} /> :\r\n            <Container style={{ backgroundColor: \"\", width: \"60vw\", marginTop: \"5rem\" }}>\r\n                <HeaderBar loading={loading} setLoading={setLoading} user={user}></HeaderBar>\r\n                <Grid container style={{ minHeight: \"30vh\", marginBottom: \"3rem\" }}>\r\n                    <Grid item xs={12} sm={12} md={5} lg={5}\r\n                        className={classes.imageSection}>\r\n                        <Avatar alt=\"Profile\" className={classes.userImageIcon} src={user?.profileImageURL} />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={12} md={7} lg={7} className={classes.userDescription}>\r\n                        <div>\r\n                            <div className={classes.userName}>{user.username}</div>\r\n                            <div style={{ color: \"#485460\" }}>\r\n                                <span style={{ fontWeight: \"500\", color: \"#3d3d3d\", fontSize: \"large\" }}>{user.postIds.length}</span> posts\r\n                            </div>\r\n                            <div style={{ color: \"#485460\" }}>{user.userBio}</div>\r\n                        </div>\r\n                    </Grid>\r\n                </Grid>\r\n\r\n                <Divider />\r\n\r\n                <div className={classes.videoSection}>\r\n                    {\r\n                        // <h1>Hello</h1>\r\n                        videos.map(videoObj => {\r\n                            return (\r\n                                <div className={classes.videoContainer}>\r\n                                    <Video\r\n                                        src={videoObj.videoUrl}\r\n                                        id={videoObj.puid}\r\n                                        key={videoObj.puid}\r\n                                    ></Video>\r\n                                    <div className={classes.overlayContainer}\r\n                                        onMouseOver={(e) => e.currentTarget.style.opacity = \"1\"}\r\n                                        onMouseOut={(e) => e.currentTarget.style.opacity = \"0\"}\r\n                                        onClick={handlePostSound}>\r\n                                        <LikeIcon />&nbsp;{videoObj.likesCount} {videoObj.likesCount === 1 ? \"like\" : \"likes\"}\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n            </Container>\r\n    )\r\n}\r\n\r\nfunction Video(props) {\r\n    return (\r\n        <video\r\n            id={props.id}\r\n            loop\r\n            width=\"250\"\r\n            muted={true}\r\n            autoPlay\r\n            style={{ minHeight: \"100%\" }}\r\n            src={props.src}>\r\n        </video>\r\n    )\r\n}\r\n\r\nfunction handlePostSound(e) {\r\n    e.currentTarget.previousSibling.muted = !e.currentTarget.previousSibling.muted;\r\n}\r\n\r\nexport default Profile;","import React, { useState } from 'react';\r\nimport { makeStyles, Avatar, Typography } from '@material-ui/core';\r\n\r\n\r\nexport default function Comments({commentObj}) {\r\n\r\n    const useStyles = makeStyles({\r\n        commentBox: {\r\n            display: \"flex\",\r\n        },\r\n        avatarIcon: {\r\n            marginLeft: \"1rem\",\r\n            height: \"1.5rem\",\r\n            width: \"1.5rem\"\r\n        },\r\n        commentContent: {\r\n            marginLeft: \"1rem\",\r\n        },\r\n        commentText: {\r\n            fontFamily: \"Nuntino Sans, sans-serif\",\r\n            color: \"#4b4b4b\",\r\n            letterSpacing: \"0.8px\",\r\n        }\r\n    })\r\n\r\n    const classes = useStyles();\r\n\r\n    const [comment, setComment] = useState(\"\");\r\n\r\n    return (\r\n        <div className={classes.commentBox}>\r\n            <Avatar alt=\"Remy Sharp\" className={classes.avatarIcon} src={commentObj.profileImageURL}/>\r\n            <div className={classes.commentContent}>\r\n                <Typography variant=\"subtitle2\" className={classes.profile} >{commentObj.username}</Typography>\r\n                <Typography variant=\"body2\" className={classes.commentText}>{commentObj.description}</Typography>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useState, useContext } from 'react';\r\nimport { makeStyles, IconButton } from '@material-ui/core';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport {AuthContext}  from '../Context/AuthProvider';\r\nimport { database, firestore } from '../firebase';\r\n\r\n\r\nexport default function CommentEditor({commentVideoObj, setLoading}) {\r\n\r\n    const useStyles = makeStyles({\r\n        commentSectionWriter: {\r\n            //backgroundColor: \"yellow\",\r\n            height: \"4rem\",\r\n            width: \"100%\",\r\n            display: \"flex\",\r\n            borderWidth: \"1px 0 0 0\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"#f1f2f6\",\r\n        },\r\n        commentEditor: {\r\n            width: \"85%\",\r\n            height: \"100%\",\r\n            border: \"none\",\r\n            resize: \"none\",\r\n            outline: \"none\",\r\n            paddingLeft: \"1.5rem\",\r\n            paddingTop: \"1.2rem\",\r\n            fontFamily: \"Heebo, sans-serif\",\r\n            fontSize: \"0.9rem\",\r\n            '&::-webkit-scrollbar': {\r\n                width: '0'\r\n              },\r\n        },\r\n        sendIcon: {\r\n            width: \"15%\",\r\n            fontFamily: \"Roboto, sans-serif\",\r\n            fontSize: \"small\",\r\n            color: \"#a5b1c2\"\r\n        },\r\n    })\r\n\r\n    const classes = useStyles();\r\n    const [comment, setComment] = useState('');\r\n\r\n    const handleCommentText = (e) => {\r\n        setComment(e.target.value);\r\n    }\r\n\r\n    const handleCommentPost = async () => {\r\n        // Create structure of comment fields entity\r\n        let commentObjStructure = {\r\n            puid: commentVideoObj.puid,\r\n            profileImageURL: commentVideoObj.userProfileImageURL,\r\n            username: commentVideoObj.username,\r\n            description: comment,\r\n            createdAt: database.getUserTimeStamp()\r\n        }\r\n\r\n\r\n        setLoading(true);\r\n        // Add the new posted comment doc in firestore comments collection\r\n        let commentObj = await database.comments.add(commentObjStructure);\r\n        \r\n        // Get the post current comments and update doc by merging the new comment into doc\r\n        let postRef = await database.posts.doc(commentVideoObj.puid).get();\r\n        let post = postRef.data();\r\n        await database.posts.doc(commentVideoObj.puid).update({\r\n            comments: [...post.comments, commentObj.id]\r\n        })\r\n        setLoading(false);\r\n\r\n        // console.log('Comment Success');\r\n        // After post nullify text area of comment\r\n        setComment(\"\");\r\n    }\r\n\r\n    return (\r\n        <div className={classes.commentSectionWriter}>\r\n            <textarea \r\n            placeholder=\"Add a comment...\"\r\n            className={classes.commentEditor}\r\n            value={comment}\r\n            onChange={handleCommentText}></textarea>\r\n            <IconButton onClick={() => {handleCommentPost()}} className={classes.sendIcon}>\r\n                <SendIcon ></SendIcon>\r\n            </IconButton>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\n\r\nexport default function CommentVideo({ commentVideoObj }) {\r\n\r\n    return (\r\n        <div style={{\r\n            display: \"flex\",\r\n            justifyContent: \"flex-end\",\r\n            alignItems: \"center\",\r\n            position: \"relative\",\r\n        }}>\r\n            <video\r\n                width=\"400\"\r\n                height='500'\r\n                autoPlay\r\n                loop\r\n                muted={true}\r\n                src={commentVideoObj.videoUrl}\r\n                style={{ minHeight: \"100%\" }}></video>\r\n        </div>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport { makeStyles, Grid, Avatar, Typography, IconButton, Hidden } from '@material-ui/core';\r\nimport OptionsIcon from '@material-ui/icons/MoreHoriz';\r\nimport Comments from './Comments';\r\nimport CommentEditor from './CommentEditor';\r\nimport CommentVideo from './CommentVideo';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { database } from '../firebase';\r\n\r\nexport default function CommentModal({ commentVideoObj, postComments, setCommentVideoObj, setLoading }) {\r\n    const useStyles = makeStyles({\r\n        mainContainer: {\r\n            backgroundColor: \"white\",\r\n            position: \"fixed\",\r\n            height: \"32rem\",\r\n            top: \"calc( ( 100vh - 30rem ) / 2 )\",\r\n            left: \"0rem\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            boxSizing: \"border-box\"\r\n        },\r\n        videoSection: {\r\n            // backgroundColor: \"lightblue\",\r\n        },\r\n        commentSection: {\r\n            // backgroundColor: \"lightblue\",\r\n            width: \"25vw\",\r\n            borderWidth: \"1px 1px 1px 1px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"#ced6e0\",\r\n            // display: \"flex\",\r\n            // flexDirection: \"column\",\r\n            // justifyContent: \"space-between\",\r\n        },\r\n        commentSectionHeader: {\r\n            // backgroundColor: \"lightpink\",\r\n            height: \"5rem\",\r\n            display: \"flex\",\r\n            borderWidth: \"0 0 1px 0\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"#f1f2f6\",\r\n        },\r\n        avatarSection: {\r\n            width: \"85%\",\r\n            heigth: \"100%\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            // backgroundColor: \"grey\"\r\n        },\r\n        profileName: {\r\n            fontFamily: \"Heebo, sans-serif\",\r\n            marginLeft: \"1rem\",\r\n        },\r\n        avatarIcon: {\r\n            marginLeft: \"1rem\",\r\n            height: \"2rem\",\r\n            width: \"2rem\"\r\n        },\r\n        optionsSection: {\r\n            width: \"15%\",\r\n            // backgroundColor: \"yellow\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n        },\r\n        optionsIcon: {\r\n            fontSize: \"x-large\",\r\n            color: \"#576574\"\r\n        },\r\n        commentSectionBody: {\r\n            // backgroundColor: \"coral\",\r\n            height: \"calc( 32rem - 5rem - 4rem )\",\r\n            // height: \"50vh\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            gap: \"1rem\",\r\n            overflow: \"auto\",\r\n            paddingTop: \"0.5rem\",\r\n            '&::-webkit-scrollbar': {\r\n                width: '0'\r\n            },\r\n        },\r\n\r\n    })\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        !commentVideoObj ? null :\r\n            <Grid container className={classes.mainContainer}>\r\n                <Hidden xsDown smDown>\r\n                    <Grid item xs={\"hide\"} xs={1} sm={4} md={4} lg={3} className={classes.videoSection}>\r\n                        <CommentVideo commentVideoObj={commentVideoObj}></CommentVideo>\r\n                    </Grid>\r\n                </Hidden>\r\n                <Grid item xs={10} sm={8} md={4} lg={3} className={classes.commentSection}>\r\n                    <div className={classes.commentSectionHeader}>\r\n                        <div className={classes.avatarSection}>\r\n                            <Avatar alt=\"Remy Sharp\" src={commentVideoObj.userProfileImageURL} className={classes.avatarIcon} />\r\n                            <Typography variant=\"subtitle1\" className={classes.profileName}>Rupesh_Sharma</Typography>\r\n\r\n                        </div>\r\n                        <div className={classes.optionsSection}>\r\n                            <IconButton onClick={() => { setCommentVideoObj(null) }}>\r\n                                {/* <OptionsIcon className={classes.optionsIcon}></OptionsIcon> */}\r\n                                <ClearIcon className={classes.optionsIcon}></ClearIcon>\r\n                            </IconButton>\r\n                        </div>\r\n                    </div>\r\n                    <div className={classes.commentSectionBody}>\r\n                        {\r\n                            postComments.map((commentObj) => {\r\n                                return <Comments key={commentObj.cuid} commentObj={commentObj} />\r\n                            })\r\n                        }\r\n                    </div>\r\n                    <CommentEditor commentVideoObj={commentVideoObj} setLoading={setLoading} />\r\n                </Grid>\r\n            </Grid>\r\n    )\r\n}","import React, { useContext, useState, useEffect } from 'react'\r\nimport { AuthContext } from '../Context/AuthProvider';\r\nimport { makeStyles, Avatar, Container, CircularProgress, Modal, Backdrop, Fade, Button, TextField } from '@material-ui/core';\r\nimport PhotoCamera from '@material-ui/icons/PhotoCamera';\r\nimport { database, storage } from '../firebase';\r\nimport LikeIcon from '@material-ui/icons/Favorite';\r\nimport CommentIcon from '@material-ui/icons/ChatBubble';\r\nimport CommentModal from './CommentModal';\r\nimport uuid from 'react-uuid';\r\nimport HeaderBar from './HeaderBar';\r\n\r\n\r\nexport default function Feed() {\r\n    const useStyles = makeStyles((theme) => ({\r\n        root: {\r\n            '& > *': {\r\n                margin: theme.spacing(1),\r\n                paddingLeft: \"7%\"\r\n            },\r\n        },\r\n        input: {\r\n            display: 'none',\r\n        },\r\n        feedContainer: {\r\n            width: \"100vw\",\r\n            // backgroundColor: \"lightblue\",\r\n            marginTop: \"5rem\"\r\n        },\r\n        reelsContainer: {\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            marginTop: \"3rem\",\r\n            gap: \"7rem\"\r\n        },\r\n        likeIcon: {\r\n            fontSize: \"x-large\"\r\n        },\r\n        commentIcon: {\r\n            fontSize: \"x-large\"\r\n        },\r\n        liked: {\r\n            color: \"#ff5252\"\r\n        },\r\n        unliked: {\r\n            color: \"#f1f2f6\"\r\n        },\r\n        videoContainer: {\r\n            position: \"relative\",\r\n            display: \"flex\",\r\n            height: \"80vh\",\r\n        },\r\n        circularLoader: {\r\n            position: \"absolute\",\r\n            top: \"calc( 100% / 2 )\"\r\n        },\r\n        videoActionsIconsContainer: {\r\n            display: \"flex\",\r\n            width: \"7rem\",\r\n            justifyContent: \"space-around\"\r\n        },\r\n        modal: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n        },\r\n        paper: {\r\n            backgroundColor: theme.palette.background.paper,\r\n            boxShadow: theme.shadows[5],\r\n            padding: theme.spacing(2, 4, 3),\r\n            width: \"30vw\",\r\n            height: \"35vh\",\r\n            borderRadius: \"10px\",\r\n            textAlign: \"center\",\r\n            outline: \"none\",\r\n        },\r\n        videoDescriptionSection: {\r\n            position: \"absolute\",\r\n            bottom: \"1rem\",\r\n            left: \"0.5rem\",\r\n            marginLeft:'230px',\r\n            minHeight: \"5rem\",\r\n            // backgroundColor: \"lightgreen\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"space-around\",\r\n            // gap: \"1rem\",\r\n        }\r\n    }))\r\n    let classes = useStyles();\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [uploadFile, setUploadFile] = useState(null);\r\n    const [user, setUser] = useState();\r\n    const [pageLoading, setPageLoading] = useState(true);\r\n    const [isLiked, setIsLiked] = useState(false);\r\n    const [videos, setVideos] = useState([]);\r\n    const [commentVideoObj, setCommentVideoObj] = useState(null);\r\n    const [postComments, setPostComments] = useState([]);\r\n    const [lastVisiblePost, setLastVisiblePost] = useState();\r\n    const { currentUser } = useContext(AuthContext);\r\n    const [open, setOpen] = useState(false);\r\n    const [videoDescription, setVideoDescription] = useState(\"\");\r\n\r\n    // For Video description Modal - open and close \r\n    const handleOpen = () => {\r\n        // console.log('Opened');\r\n        setOpen(true);\r\n    };\r\n    const handleClose = () => {\r\n        // console.log('closed');\r\n        setOpen(false);\r\n        uploadNewPostInFirestore();\r\n    };\r\n\r\n    const handleInputFile = (e) => {\r\n        e.preventDefault();\r\n\r\n        // Get file from html\r\n        let file = e?.target?.files[0];\r\n        // if (file != null) console.log(e.target.files[0]);\r\n        if (!file) {\r\n            setUploadFile(null);\r\n            return;\r\n        }\r\n\r\n        // If file size is too large then don't upload \r\n        if (file.size / (1024 * 1024) > 20) {\r\n            alert('Your file size is too large');\r\n            setUploadFile(null);\r\n            return;\r\n        }\r\n\r\n        setUploadFile(file);\r\n        handleOpen();\r\n    }\r\n\r\n    const uploadNewPostInFirestore = () => {\r\n        // 1. Upload\r\n        const uploadFileTask = storage.ref(`/posts/${uuid()}`).put(uploadFile);\r\n        setLoading(true);\r\n\r\n        // On upload do update all entities in firestore\r\n        uploadFileTask.on('state_changed', progressFn, errorFn, successFn);\r\n\r\n        function progressFn(snapshot) {\r\n            //This callback is for providing the progress\r\n            const progress = snapshot.bytesTransferred / snapshot.totalBytes;\r\n            // console.log(progress)\r\n        }\r\n        function errorFn() {\r\n            console.log('Some error occured while video uploading...');\r\n            setLoading(false);\r\n            setVideoDescription(\"\");\r\n            return;\r\n        }\r\n        function successFn() {\r\n            uploadFileTask.snapshot.ref.getDownloadURL()\r\n                .then(async (url) => {\r\n                    // 2. Put new document of uploaded post in Post collection in firestore\r\n                    // auid -> uid of the author who uploaded the post\r\n                    let postObjStructure = {\r\n                        comments: [],\r\n                        likes: [],\r\n                        url,\r\n                        auid: currentUser.uid,\r\n                        createdAt: database.getUserTimeStamp(),\r\n                        videoDescription,\r\n                    }\r\n\r\n                    // Also add Post obj in Post collection in firestore \r\n                    let postObj = await database.posts.add(postObjStructure);\r\n                    // 3. Update PostObj uid in author(current user's) collection in firestore in his all posts array\r\n                    let updatedUserPosts = user.postIds;\r\n                    updatedUserPosts.push(postObj.id);\r\n                    await database.users.doc(currentUser.uid).update({\r\n                        postIds: updatedUserPosts\r\n                    })\r\n\r\n                    setLoading(false);\r\n                    setVideoDescription(\"\");\r\n                })\r\n        }\r\n    }\r\n\r\n    // Get currentuser Data\r\n    useEffect(async () => {\r\n        // console.log(currentUser.uid);\r\n        // Get user data (how get a document from a collection in firebase \r\n        // auth user doen't contains any other data besides email ,password , uid\r\n        //  you need to get the complete document from  the firstore using either of email or uid \r\n\r\n        // 1. Snapshot (resource intensive) (realtime)\r\n        // database.users.doc(currentUser.uid).onSnapshot((snapshot) => {\r\n        //     console.log(snapshot.data());\r\n        //     setUser(snapshot.data());\r\n        //     setPageLoading(false);\r\n        // })\r\n\r\n        // 2. Normal get data from firebase\r\n        let dataObject = await database.users.doc(currentUser.uid).get();\r\n        setUser(dataObject.data());\r\n        setPageLoading(false);\r\n    }, [])\r\n\r\n    // Last visible post is to keep track of last received doc, and fetch back next batch of data from firestore (Infinite scrolling)\r\n    async function fetchPostsInBatches() {\r\n        setLoading(true);\r\n\r\n        let unsubscribe =\r\n            await database.posts\r\n                .orderBy(\"createdAt\", \"desc\")\r\n                .startAfter(lastVisiblePost)\r\n                .limit(2)\r\n                .onSnapshot(async snapshot => {\r\n                    if (snapshot.docs.length === 0) {\r\n                        setLastVisiblePost(null);\r\n                        setLoading(false);\r\n                        return;\r\n                    }\r\n                    let curVideos = snapshot.docs.map(doc => doc.data());\r\n                    setLastVisiblePost(snapshot.docs[snapshot.docs.length - 1]);\r\n\r\n                    // Extract videosURL from post collection and user's data from user collection\r\n                    // ProfileImg of the author of the post(video)\r\n                    let videosDataArrFromFireStore = [];\r\n                    for (let i = 0; i < curVideos.length; i++) {\r\n                        let { url: videoUrl, auid, likes, videoDescription } = curVideos[i];\r\n                        let puid = snapshot.docs[i].id;\r\n                        let userObject = await database.users.doc(auid).get();\r\n                        let { profileImageURL: userProfileImageURL, username } = userObject.data();\r\n\r\n                        // For likes, check if current user has liked the post\r\n                        videosDataArrFromFireStore.push({\r\n                            videoUrl,\r\n                            userProfileImageURL,\r\n                            username,\r\n                            puid,\r\n                            liked: likes.includes(currentUser.uid),\r\n                            videoDescription,\r\n                        });\r\n                    }\r\n\r\n                    setLoading(false);\r\n                    // Set Received videos for further dispaly in feed\r\n                    setVideos([...videos, ...videosDataArrFromFireStore]);\r\n                })\r\n    }\r\n\r\n    // Get all posts to display in feed\r\n    useEffect(async () => {\r\n        setLoading(true);\r\n\r\n        // Since snapshot is realtime we receive from unsubscribe function which has to be returned during cleanup\r\n        let unsubscribe =\r\n            await database.posts\r\n                .orderBy(\"createdAt\", \"desc\")\r\n                .limit(10)\r\n                .onSnapshot(async snapshot => {\r\n                    if (lastVisiblePost) return;\r\n                    let videos = snapshot.docs.map(doc => doc.data());\r\n\r\n                    setLastVisiblePost(snapshot.docs[snapshot.docs.length - 1]);\r\n\r\n                    // Extract videosURL from post collection and user's data from user collection\r\n                    // ProfileImg of the author of the post(video)\r\n                    let videosDataArrFromFireStore = [];\r\n                    for (let i = 0; i < videos.length; i++) {\r\n                        let { url: videoUrl, auid, likes, videoDescription } = videos[i];\r\n                        let puid = snapshot.docs[i].id;\r\n                        let userObject = await database.users.doc(auid).get();\r\n                        let { profileImageURL: userProfileImageURL, username } = userObject.data();\r\n                        // For likes, check if current user has liked the post\r\n                        videosDataArrFromFireStore.push({\r\n                            videoUrl,\r\n                            userProfileImageURL,\r\n                            username,\r\n                            puid,\r\n                            liked: likes.includes(currentUser.uid),\r\n                            videoDescription\r\n                        });\r\n                    }\r\n\r\n                    setLoading(false);\r\n                    // Set Received videos for further dispaly in feed\r\n                    setVideos(videosDataArrFromFireStore);\r\n                })\r\n\r\n        return unsubscribe;\r\n    }, [])\r\n\r\n\r\n    // Intersection observer to manage video play/pause when post intersects\r\n    // Intersection observer also used for smooth scrolling of posts\r\n    // Intersection observer to fetch post data in batches (infinite scrolling)\r\n    let scrollAndVideoActionObserver;\r\n    let infiniteScrollObserver;\r\n\r\n    useEffect(() => {\r\n        let allPosts = document.querySelectorAll(\"video\");\r\n\r\n        let scrollAndVideoActionConditionObject = {\r\n            root: null,\r\n            rootMargin: \"0px\",\r\n            threshold: \"0.7\"\r\n        }\r\n        let infiniteScrollConditionObject = {\r\n            root: null,\r\n            rootMargin: \"0px\",\r\n            threshold: \"1.0\"\r\n        }\r\n\r\n        function scrollAndVideoActionCallback(entries) {\r\n            entries.forEach(entry => {\r\n                let post = entry.target;\r\n                // Initially play all the post videos, \r\n                // Then analyse if the post video intersects, if it doesn't then we need to pause it\r\n                post.play().then(() => {\r\n                    if (entry.isIntersecting === false) post.pause();\r\n                })\r\n            })\r\n            entries.forEach(entry => {\r\n                let post = entry.target;\r\n                if (entry.isIntersecting) {\r\n                    let postDimensions = post.getBoundingClientRect();\r\n                    window.scrollBy({\r\n                        top: postDimensions.top,\r\n                        left: postDimensions.left,\r\n                        behavior: 'smooth'\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        function infiniteScrollCallback(entries) {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    fetchPostsInBatches();\r\n                    infiniteScrollObserver.unobserve(entry.target);\r\n                }\r\n            })\r\n            // entries.forEach(entry => infiniteScrollObserver.unobserve(entry.target))\r\n        }\r\n\r\n        if (scrollAndVideoActionObserver) scrollAndVideoActionObserver.disconnect();\r\n        if (infiniteScrollObserver) infiniteScrollObserver.disonnect();\r\n        scrollAndVideoActionObserver = new IntersectionObserver(scrollAndVideoActionCallback, scrollAndVideoActionConditionObject);\r\n        infiniteScrollObserver = new IntersectionObserver(infiniteScrollCallback, infiniteScrollConditionObject);\r\n        allPosts.forEach((post, idx) => {\r\n            scrollAndVideoActionObserver.observe(post);\r\n            if (idx === allPosts.length - 1) infiniteScrollObserver.observe(post);\r\n        })\r\n    }, [videos])\r\n\r\n\r\n    const handleLiked = async (puid, liked) => {\r\n\r\n        // Get clicked post\r\n        // Find liked or unliked\r\n        // If liked -> append user uid who liked\r\n        // If unliked -> remove user uid who unliked\r\n        let postRef = await database.posts.doc(puid).get();\r\n        let post = postRef.data();\r\n        // Not yet Liked\r\n        if (liked == false) {\r\n            let likes = post.likes;\r\n            database.posts.doc(puid).update({\r\n                \"likes\": [...likes, currentUser.uid]\r\n            })\r\n            setIsLiked(true);\r\n        }\r\n        else {\r\n            let likes = post.likes.filter(likedByUid => {\r\n                return likedByUid !== currentUser.uid;\r\n            })\r\n            database.posts.doc(puid).update({\r\n                \"likes\": likes\r\n            })\r\n            setIsLiked(false);\r\n        }\r\n    }\r\n\r\n    const handleComment = async (videoObj) => {\r\n        // Set state to current Video obj of comments\r\n        setCommentVideoObj(videoObj);\r\n\r\n        // Get all comments in recent timely order from firestore comments collection\r\n        let unsubscribe = await database.comments.orderBy(\"createdAt\", \"desc\").onSnapshot(async snapshot => {\r\n            let comments = snapshot.docs.map(doc => doc.data());\r\n\r\n            // Store all required data to display for comments in an object and push in an array\r\n            let commentsDataArrFromFirestore = [];\r\n            for (let i = 0; i < comments.length; i++) {\r\n                let { profileImageURL, description, username, puid } = comments[i];\r\n                let cuid = snapshot.docs[i].id;\r\n                commentsDataArrFromFirestore.push({ profileImageURL, description, username, puid, cuid });\r\n            }\r\n\r\n            // Filter the comments of the current post\r\n            commentsDataArrFromFirestore = commentsDataArrFromFirestore.filter((commentObj) => {\r\n                return commentObj.puid === (videoObj ? videoObj.puid : \"\");\r\n            })\r\n\r\n            // Set Received comments for further dispaly in comments feed\r\n            // console.log(commentsDataArrFromFirestore);\r\n            setPostComments(commentsDataArrFromFirestore);\r\n        })\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        pageLoading == true ? <CircularProgress color=\"secondary\" className={classes.circularLoader} /> :\r\n            <>\r\n                <HeaderBar loading={loading} setLoading={setLoading} user={user}></HeaderBar>\r\n                <Modal\r\n                    aria-labelledby=\"transition-modal-title\"\r\n                    aria-describedby=\"transition-modal-description\"\r\n                    className={classes.modal}\r\n                    open={open}\r\n                    onClose={handleClose}\r\n                    closeAfterTransition\r\n                    BackdropComponent={Backdrop}\r\n                    BackdropProps={{\r\n                        timeout: 500,\r\n                    }}\r\n                >\r\n                    <Fade in={open}>\r\n                        <div className={classes.paper}>\r\n                            <h2\r\n                                style={{\r\n                                    fontFamily: \"Quicksand, sans-serif\",\r\n                                }} >Bio-Description</h2>\r\n                            <div>\r\n                                <TextField\r\n                                    id=\"outlined-basic\"\r\n                                    label=\"Put on that Bio..\"\r\n                                    variant=\"outlined\"\r\n                                    type=\"text\"\r\n                                    fullWidth\r\n                                    color=\"secondary\"\r\n                                    style={{ marginBottom: \"2rem\" }}\r\n                                    value={videoDescription}\r\n                                    onChange={(e) => setVideoDescription(e.target.value)} />\r\n                            </div>\r\n                            <Button\r\n                                id=\"smash_btn\"\r\n                                variant=\"outlined\"\r\n                                color=\"secondary\"\r\n                                onClick={handleClose}>Smash</Button>\r\n                        </div>\r\n                    </Fade>\r\n                </Modal>\r\n                <Container className={classes.feedContainer}>\r\n                    <div>\r\n                        <div className=\"uploadImage\">\r\n                            <div className={classes.root}>\r\n                                <input accept=\"file\" className={classes.input} id=\"icon-button-file\" type=\"file\"\r\n                                    onChange={handleInputFile}\r\n                                />\r\n                                <label style={{ paddingLeft: \"0\" }} htmlFor=\"icon-button-file\">\r\n                                    <Button variant=\"outlined\" color=\"secondary\" component=\"span\" disabled={loading} endIcon={<PhotoCamera />}>\r\n                                        Upload\r\n                                    </Button>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={classes.reelsContainer}>\r\n                        {videos.map((videoObj) => {\r\n                            return (\r\n                                <div className={classes.videoContainer} key={videoObj.puid}>\r\n                                    <Video\r\n                                        src={videoObj.videoUrl}\r\n                                        id={videoObj.puid}\r\n                                        userName={videoObj.username}>\r\n                                    </Video>\r\n                                    <div className={classes.videoDescriptionSection}>\r\n                                        <div\r\n                                            style={{\r\n                                                padding: \"0.5rem\",\r\n                                                color: \"#ffffff\",\r\n                                                fontFamily: \"Quicksand, sans-serif\",\r\n                                            }}>\r\n                                            <span\r\n                                                style={{\r\n                                                    color: \"#26de81\",\r\n                                                    backgroundColor: \"#4b4b4b\",\r\n                                                    padding: \"4px 8px\",\r\n                                                    borderRadius: \"5px\",\r\n                                                    fontWeight: \"bold\",\r\n                                                    fontSize: \"small\",\r\n                                                }}><s>@{videoObj.username}</s></span>\r\n                                            &emsp;{videoObj.videoDescription}\r\n                                        </div>\r\n                                        <div className={classes.videoActionsIconsContainer}>\r\n                                            <Avatar alt=\"Profile\" style={{ height: \"1.5rem\", width: \"1.5rem\" }} src={videoObj.userProfileImageURL} />\r\n                                            <LikeIcon\r\n                                                className={[classes.likeIcon, videoObj.liked ? classes.liked : classes.unliked]}\r\n                                                onClick={() => handleLiked(videoObj.puid, videoObj.liked)}\r\n                                            />\r\n                                            <CommentIcon\r\n                                                className={[classes.commentIcon, classes.unliked]}\r\n                                                onClick={() => { handleComment(videoObj) }}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                </Container>\r\n\r\n                <CommentModal commentVideoObj={commentVideoObj} postComments={postComments} setCommentVideoObj={setCommentVideoObj} setLoading={setLoading} />\r\n            </>\r\n    );\r\n}\r\n\r\nfunction Video(props) {\r\n    return (\r\n        <>\r\n            <video\r\n                onClick={handlePostSound}\r\n                muted={false}\r\n                id={props.id}\r\n                src={props.src}\r\n              //  onEnded={onVideoEnd} \r\n                >\r\n            </video>\r\n        </>\r\n    )\r\n}\r\n\r\nfunction handlePostSound(e) {\r\n    e.target.muted = !e.target.muted;\r\n}\r\n\r\nfunction onVideoEnd(e) {\r\n    let nextVideoSiblingParent = e.target.parentElement.nextSibling;\r\n    if (nextVideoSiblingParent) {\r\n        let videoDimensions = nextVideoSiblingParent.children[0].getBoundingClientRect();\r\n        window.scrollBy({\r\n            top: videoDimensions.top,\r\n            left: videoDimensions.left,\r\n            behavior: 'smooth'\r\n        })\r\n    }\r\n    \r\n}","import logo from './logo.svg';\nimport './App.css';\nimport { useContext } from 'react';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nimport { AuthProvider, AuthContext } from './Context/AuthProvider';\nimport Login from './Components/Login';\nimport SignUp from './Components/Signup';\nimport Profile from './Components/Profile';\nimport Feed from './Components/Feed';\n\nfunction App() {\n  return (\n\n    <AuthProvider>\n      <Router>\n        <Switch>\n          <Route path='/login' component={Login}></Route>\n          <Route path='/signup' component={SignUp}></Route>\n          <PrivateRoute path='/profile' privateComponent={Profile}></PrivateRoute>\n          <PrivateRoute path='/' privateComponent={Feed}></PrivateRoute>\n        </Switch>\n      </Router>\n    </AuthProvider>\n    \n  );\n}\n\nfunction PrivateRoute({privateComponent: Component, ...restProps}) {\n  const { currentUser } = useContext(AuthContext);\n  return (\n    <Route {...restProps} render={(props) => {\n      return (currentUser !== null) ? <Component {...props}/> : <Redirect to='/login'></Redirect>\n    }}></Route>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  \n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}